<!DOCTYPE html><html lang="zh-CN" data-default-color-scheme="auto"><head><meta charset="UTF-8"><link rel="apple-touch-icon" sizes="76x76" href="/img/avatar.png"><link rel="icon" href="/img/avatar.png"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=5,shrink-to-fit=no"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="theme-color" content="#2f4154"><meta name="author" content="Neo"><meta name="keywords" content=""><meta name="description" content="Redis 数据类型Redis 支持五种基本类型：String（字符串），Hash（哈希），List（列表），Set（集合）及**SortedSet（zset：有序集合)**。 其他特殊类型有 GEO（主要用于存储地理位置信息），BitMap（位图），HyperLogLog（用来做基数统计的算法）。 Redis 数据结构介绍Redis 将操作不同数据类型的命令做了分组，官网（https:&#x2F;&#x2F;red"><meta property="og:type" content="article"><meta property="og:title" content="Redis数据类型"><meta property="og:url" content="https://blog-21n.pages.dev/2023/03/08/Redis%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/index.html"><meta property="og:site_name" content="KingShit"><meta property="og:description" content="Redis 数据类型Redis 支持五种基本类型：String（字符串），Hash（哈希），List（列表），Set（集合）及**SortedSet（zset：有序集合)**。 其他特殊类型有 GEO（主要用于存储地理位置信息），BitMap（位图），HyperLogLog（用来做基数统计的算法）。 Redis 数据结构介绍Redis 将操作不同数据类型的命令做了分组，官网（https:&#x2F;&#x2F;red"><meta property="og:locale" content="zh_CN"><meta property="article:published_time" content="2023-03-08T08:56:00.000Z"><meta property="article:modified_time" content="2024-08-09T17:28:12.568Z"><meta property="article:author" content="Neo"><meta property="article:tag" content="Redis"><meta name="twitter:card" content="summary_large_image"><meta name="referrer" content="no-referrer-when-downgrade"><title>Redis数据类型 - KingShit</title><link rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css"><link rel="stylesheet" href="//at.alicdn.com/t/c/font_1749284_5i9bdhy70f8.css"><link rel="stylesheet" href="//at.alicdn.com/t/c/font_1736178_k526ubmyhba.css"><link rel="stylesheet" href="/css/main.css"><link id="highlight-css" rel="stylesheet" href="/css/highlight.css"><link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css"><script id="fluid-configs">var Fluid=window.Fluid||{};Fluid.ctx=Object.assign({},Fluid.ctx);var CONFIG={hostname:"blog-21n.pages.dev",root:"/",version:"1.9.8",typing:{enable:!0,typeSpeed:70,cursorChar:"_",loop:!1,scope:[]},anchorjs:{enable:!0,element:"h1,h2,h3,h4,h5,h6",placement:"left",visible:"hover",icon:""},progressbar:{enable:!0,height_px:3,color:"#29d",options:{showSpinner:!1,trickleSpeed:100}},code_language:{enable:!0,default:"TEXT"},copy_btn:!0,image_caption:{enable:!0},image_zoom:{enable:!0,img_url_replace:["",""]},toc:{enable:!0,placement:"right",headingSelector:"h1,h2,h3,h4,h5,h6",collapseDepth:0},lazyload:{enable:!0,loading_img:"/img/loading.gif",onlypost:!1,offset_factor:2},web_analytics:{enable:!1,follow_dnt:!0,baidu:null,google:{measurement_id:null},tencent:{sid:null,cid:null},leancloud:{app_id:null,app_key:null,server_url:null,path:"window.location.pathname",ignore_local:!1},umami:{src:null,website_id:null,domains:null,start_time:"2024-01-01T00:00:00.000Z",token:null,api_server:null}},search_path:"/local-search.xml",include_content_in_search:!0};if(CONFIG.web_analytics.follow_dnt){var dntVal=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack;Fluid.ctx.dnt=dntVal&&(dntVal.startsWith("1")||dntVal.startsWith("yes")||dntVal.startsWith("on"))}</script><script src="/js/utils.js"></script><script src="/js/color-schema.js"></script><script>!function(){var o;if("boxpiggy.github.io"===window.location.hostname?o="https://boxpiggy.github.io/live2d-widget/autoload.js":"blog-21n.pages.dev"===window.location.hostname&&(o="https://blog-21n.pages.dev/live2d-widget/autoload.js"),o){var t=document.createElement("script");t.src=o,document.head.appendChild(t)}}()</script><meta name="generator" content="Hexo 6.3.0"></head><body><header><div class="header-inner" style="height:70vh"><nav id="navbar" class="navbar fixed-top navbar-expand-lg navbar-dark scrolling-navbar"><div class="container"><a class="navbar-brand" href="/"><strong>Neo&#39;s blog</strong> </a><button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><div class="animated-icon"><span></span><span></span><span></span></div></button><div class="collapse navbar-collapse" id="navbarSupportedContent"><ul class="navbar-nav ml-auto text-center"><li class="nav-item"><a class="nav-link" href="/" target="_self"><i class="iconfont icon-home-fill"></i> <span>首页</span></a></li><li class="nav-item"><a class="nav-link" href="/archives/" target="_self"><i class="iconfont icon-archive-fill"></i> <span>归档</span></a></li><li class="nav-item"><a class="nav-link" href="/categories/" target="_self"><i class="iconfont icon-category-fill"></i> <span>分类</span></a></li><li class="nav-item"><a class="nav-link" href="/tags/" target="_self"><i class="iconfont icon-tags-fill"></i> <span>标签</span></a></li><li class="nav-item"><a class="nav-link" href="/about/" target="_self"><i class="iconfont icon-user-fill"></i> <span>关于</span></a></li><li class="nav-item" id="search-btn"><a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search"><i class="iconfont icon-search"></i></a></li><li class="nav-item" id="color-toggle-btn"><a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle"><i class="iconfont icon-dark" id="color-toggle-icon"></i></a></li></ul></div></div></nav><div id="banner" class="banner" parallax="true" style="background:url(/img/default.png) no-repeat center center;background-size:cover"><div class="full-bg-img"><div class="mask flex-center" style="background-color:rgba(0,0,0,.3)"><div class="banner-text text-center fade-in-up"><div class="h2"><span id="subtitle" data-typed-text="Redis数据类型"></span></div><div class="mt-3"><span class="post-meta"><i class="iconfont icon-date-fill" aria-hidden="true"></i> <time datetime="2023-03-08 16:56" pubdate>2023年3月8日 下午</time></span></div><div class="mt-1"><span class="post-meta mr-2"><i class="iconfont icon-chart"></i> 2.4k 字 </span><span class="post-meta mr-2"><i class="iconfont icon-clock-fill"></i> 21 分钟</span></div></div></div></div></div></div></header><main><div class="container-fluid nopadding-x"><div class="row nomargin-x"><div class="side-col d-none d-lg-block col-lg-2"></div><div class="col-lg-8 nopadding-x-md"><div class="container nopadding-x-md" id="board-ctn"><div id="board"><article class="post-content mx-auto"><h1 id="seo-header">Redis数据类型</h1><div class="markdown-body"><h1 id="Redis-数据类型"><a href="#Redis-数据类型" class="headerlink" title="Redis 数据类型"></a>Redis 数据类型</h1><p>Redis 支持五种基本类型：<strong>String（字符串）</strong>，<strong>Hash（哈希）</strong>，<strong>List（列表）</strong>，<strong>Set（集合）</strong>及**SortedSet（zset：有序集合)**。</p><p>其他特殊类型有 <strong>GEO（主要用于存储地理位置信息）</strong>，<strong>BitMap（位图）</strong>，<strong>HyperLogLog（用来做基数统计的算法）</strong>。</p><h1 id="Redis-数据结构介绍"><a href="#Redis-数据结构介绍" class="headerlink" title="Redis 数据结构介绍"></a>Redis 数据结构介绍</h1><p>Redis 将操作不同数据类型的命令做了分组，官网（<a target="_blank" rel="noopener" href="https://redis.io/commands%EF%BC%89%E5%8F%AF%E4%BB%A5%E6%9F%A5%E7%9C%8B%E5%91%BD%E4%BB%A4%E3%80%82">https://redis.io/commands）可以查看命令。</a></p><table><thead><tr><th>类型</th><th>简介</th><th>特性</th><th>场景</th></tr></thead><tbody><tr><td>String(字符串)</td><td>二进制安全</td><td>可以包含任何数据,比如jpg图片或者序列化的对象,一个键最大能存储512M</td><td>—</td></tr><tr><td>Hash(字典)</td><td>键值对集合,即编程语言中的Map类型</td><td>适合存储对象,并且可以像数据库中update一个属性一样只修改某一项属性值(Memcached中需要取出整个字符串反序列化成对象修改完再序列化存回去)</td><td>存储、读取、修改用户属性</td></tr><tr><td>List(列表)</td><td>链表(双向链表)</td><td>增删快,提供了操作某一段元素的API</td><td>1,最新消息排行等功能(比如朋友圈的时间线) 2,消息队列</td></tr><tr><td>Set(集合)</td><td>哈希表实现,元素不重复</td><td>1、添加、删除,查找的复杂度都是O(1)； 2、为集合提供了求交集、并集、差集等操作</td><td>1、共同好友 2、利用唯一性,统计访问网站的所有独立ip 3、好友推荐时,根据tag求交集,大于某个阈值就可以推荐</td></tr><tr><td>Sorted Set(有序集合)</td><td>将Set中的元素增加一个权重参数score，元素按score有序排列</td><td>数据插入集合时,已经进行天然排序</td><td>1、排行榜 2、带权重的消息队列</td></tr></tbody></table><h1 id="Redis-通用命令"><a href="#Redis-通用命令" class="headerlink" title="Redis 通用命令"></a>Redis 通用命令</h1><p>通用命令是部分数据类型的，都可以使用的命令，常见的有：</p><ul><li><code>KEYS</code>：查看符合模板的所有 key（不建议在生产环境设备上使用，如果数据量较大，会阻塞所有请求）。</li><li><code>DEL</code>：删除指定的 key（可跟多个key批量删除）</li><li><code>EXISTS</code>：判断 key 是否存在</li><li><code>EXPIRE</code>：给一个 key 设置有效期，有效期到期时该 key 会被自动删除</li><li><code>TTL</code>：查看一个 key 的剩余有效期（<code>-2</code>已过期，<code>-1</code>永久有效）</li></ul><p>通过 <code>help [command]</code> 可以查看一个命令的具体用法</p><h1 id="String-类型"><a href="#String-类型" class="headerlink" title="String 类型"></a>String 类型</h1><p>String 类型，是 Redis 中最简单的存储类型。</p><p>其 value 是字符串，不过根据字符串的格式不同，又可以分为3类：</p><ul><li>string：普通字符串</li><li>int：整数类型，可以做自增、自减操作</li><li>float：浮点类型，可以做自增、自 减操作</li></ul><p>不管是哪种格式，底层都是字节数组形式存储，只不过是编码方式不同。字符串类型的最大空间不能超过512m。</p><h2 id="String-常用命令"><a href="#String-常用命令" class="headerlink" title="String 常用命令"></a>String 常用命令</h2><table><thead><tr><th>序号</th><th>命令</th><th>描述</th></tr></thead><tbody><tr><td>1</td><td><a target="_blank" rel="noopener" href="https://www.runoob.com/redis/strings-set.html">SET</a> key value</td><td>设置指定 key 的值。</td></tr><tr><td>2</td><td><a target="_blank" rel="noopener" href="https://www.runoob.com/redis/strings-get.html">GET</a> key</td><td>获取指定 key 的值。</td></tr><tr><td>3</td><td><a target="_blank" rel="noopener" href="https://www.runoob.com/redis/strings-mset.html">MSET</a> key value [key value …]</td><td>同时设置一个或多个 key-value 对。</td></tr><tr><td>4</td><td><a target="_blank" rel="noopener" href="https://www.runoob.com/redis/strings-mget.html">MGET</a> key1 [key2..]</td><td>获取所有(一个或多个)给定 key 的值。</td></tr><tr><td>5</td><td><a target="_blank" rel="noopener" href="https://www.runoob.com/redis/strings-setex.html">SETEX</a> key seconds value</td><td>将值 value 关联到 key ，并将 key 的过期时间设为 seconds (以秒为单位)。</td></tr><tr><td>6</td><td><a target="_blank" rel="noopener" href="https://www.runoob.com/redis/strings-setnx.html">SETNX</a> key value</td><td>只有在 key 不存在时设置 key 的值。</td></tr><tr><td>7</td><td><a target="_blank" rel="noopener" href="https://www.runoob.com/redis/strings-incr.html">INCR</a> key</td><td>将 key 中储存的数字值自增1。</td></tr><tr><td>8</td><td><a target="_blank" rel="noopener" href="https://www.runoob.com/redis/strings-incrby.html">INCRBY</a> key increment</td><td>将 key 所储存的值自增并指定步长 ，如：incrby num 2 让num自增2</td></tr><tr><td>9</td><td><a target="_blank" rel="noopener" href="https://www.runoob.com/redis/strings-decr.html">DECR</a> key</td><td>将 key 中储存的数字值减一。</td></tr><tr><td>10</td><td><a target="_blank" rel="noopener" href="https://www.runoob.com/redis/strings-append.html">APPEND</a> key value</td><td>如果 key 已经存在并且是一个字符串， APPEND 命令将指定的 value 追加到该 key 原来值（value）的末尾。</td></tr></tbody></table><h2 id="key-层级格式"><a href="#key-层级格式" class="headerlink" title="key 层级格式"></a>key 层级格式</h2><p>Redis 没有类似 MySQL 中的 Table 的概念，如何区分不同类型的 key 呢？比如用户 id 和商品 id ？</p><ul><li>Redis 的 key 允许有多个单词形成层级结构，多个单词之间用<code>:</code>分隔，格式如：<code>项目名:业务名:类型:id</code></li></ul><p>例，假设项目名为 kingshit，有 user 和 product 两种不同类型的数据，可以这样定义key：</p><ul><li>user 相关的 key：<code>kingshit:user:1</code></li><li>product 相关的 key：<code>kingshit:product:1</code></li></ul><h2 id="对象存储"><a href="#对象存储" class="headerlink" title="对象存储"></a>对象存储</h2><p>如果 value 是一个 Java 对象，则可以将对象序列化为 JSON 字符串后存储：</p><table><thead><tr><th>KEY</th><th>VALUE</th></tr></thead><tbody><tr><td>kingshit:user:1</td><td>{“id”: 1, “name”: “rwj”, “age”: 28}</td></tr><tr><td>kingshit:product:1</td><td>{“id”: 1, “name”: “Redmi K50 Ultra”, “price”: 3000}</td></tr></tbody></table><h2 id="使用场景"><a href="#使用场景" class="headerlink" title="使用场景"></a>使用场景</h2><p>存储单个值，如用户信息、计数器等。</p><h1 id="Hash-类型"><a href="#Hash-类型" class="headerlink" title="Hash 类型"></a>Hash 类型</h1><p>Redis Hash 类型，也叫<strong>散列</strong>，其 value 是一个无序字典，类似于 Java 中的 HashMap 结构。</p><p>Redis 中每个 hash 可以存储 232 - 1 键值对（40多亿），特别适合用于存储<strong>对象</strong>（上文将对象序列化为JSON方式存储不方便修改某个字段）。</p><h2 id="对象存储（better）"><a href="#对象存储（better）" class="headerlink" title="对象存储（better）"></a>对象存储（better）</h2><p>Hash结构：可以将对象中的每个字段独立存储，可针对单个字段做CRUD：</p><table><thead><tr><th>KEY</th><th>VALUE</th><th></th></tr></thead><tbody><tr><td>field</td><td>value</td><td></td></tr><tr><td>kingshit:user:1</td><td>name</td><td>rwj</td></tr><tr><td>age</td><td>28</td><td></td></tr><tr><td>kingshit:user:2</td><td>name</td><td>niu</td></tr><tr><td>age</td><td>27</td><td></td></tr></tbody></table><h2 id="Hash-常用命令"><a href="#Hash-常用命令" class="headerlink" title="Hash 常用命令"></a>Hash 常用命令</h2><table><thead><tr><th>序号</th><th>命令</th><th>描述</th></tr></thead><tbody><tr><td>1</td><td><a target="_blank" rel="noopener" href="https://www.runoob.com/redis/hashes-hset.html">HSET</a> key field value</td><td>将哈希表 key 中的字段 field 的值设为 value 。</td></tr><tr><td>2</td><td><a target="_blank" rel="noopener" href="https://www.runoob.com/redis/hashes-hget.html">HGET</a> key field</td><td>获取存储在哈希表中指定字段的值。</td></tr><tr><td>3</td><td><a target="_blank" rel="noopener" href="https://www.runoob.com/redis/hashes-hgetall.html">HGETALL</a> key</td><td>获取在哈希表中指定 key 的所有字段和值</td></tr><tr><td>4</td><td><a target="_blank" rel="noopener" href="https://www.runoob.com/redis/hashes-hkeys.html">HKEYS</a> key</td><td>获取一个hash类型的key中所有的field</td></tr><tr><td>5</td><td><a target="_blank" rel="noopener" href="https://www.runoob.com/redis/hashes-hvals.html">HVALS</a> key</td><td>获取一个hash类型的key中所有的value</td></tr><tr><td>6</td><td><a target="_blank" rel="noopener" href="https://www.runoob.com/redis/hashes-hincrby.html">HINCRBY</a> key field increment</td><td>为哈希表 key 中的指定字段的整数值自增并指定步长。</td></tr><tr><td>7</td><td><a target="_blank" rel="noopener" href="https://www.runoob.com/redis/hashes-hsetnx.html">HSETNX</a> key field value</td><td>只有在字段 field 不存在时，设置哈希表字段的值。</td></tr></tbody></table><h2 id="使用场景-1"><a href="#使用场景-1" class="headerlink" title="使用场景"></a>使用场景</h2><p>存储对象的字段和值，如存储用户对象、文章对象等。</p><h1 id="List-类型"><a href="#List-类型" class="headerlink" title="List 类型"></a>List 类型</h1><p>Redis 中的是简单的字符串列表，按照插入顺序排序。支持正向和反向检索。</p><p>常用来存储一个有序数据，例如：评论列表、点赞列表等。</p><p>类似 Java 的 LinkedList。</p><p>特征：</p><ul><li>有序</li><li>元素可以重复</li><li>插入和删除速度快</li><li>查询速度一般</li></ul><h2 id="List-常用命令"><a href="#List-常用命令" class="headerlink" title="List 常用命令"></a>List 常用命令</h2><table><thead><tr><th>序号</th><th>命令</th><th>描述</th></tr></thead><tbody><tr><td>1</td><td><a target="_blank" rel="noopener" href="https://www.runoob.com/redis/lists-lpush.html">LPUSH</a> key value1 [value2]<a target="_blank" rel="noopener" href="https://www.runoob.com/redis/lists-rpush.html">RPUSH</a> key value1 [value2]</td><td>将一个或多个值插入到列表头部将一个或多个值添加到列表尾部</td></tr><tr><td>2</td><td><a target="_blank" rel="noopener" href="https://www.runoob.com/redis/lists-lpop.html">LPOP</a> key<a target="_blank" rel="noopener" href="https://www.runoob.com/redis/lists-rpop.html">RPOP</a> key</td><td>移出并获取列表的第一个元素，没有则返回nil移出并获取列表的最后一个元素，没有则返回nil</td></tr><tr><td>3</td><td><a target="_blank" rel="noopener" href="https://www.runoob.com/redis/lists-lrange.html">LRANGE</a> key start stop</td><td>获取列表指定范围内的元素</td></tr><tr><td>4</td><td><a target="_blank" rel="noopener" href="https://www.runoob.com/redis/lists-blpop.html">BLPOP</a> key1 [key2 ] timeout<a target="_blank" rel="noopener" href="https://www.runoob.com/redis/lists-brpop.html">BRPOP</a> key1 [key2 ] timeout</td><td>移出并获取列表的第一个元素， 如果列表没有元素会阻塞列表直到等待超时或发现可弹出元素为止。移出并获取列表的最后一个元素， 如果列表没有元素会阻塞列表直到等待超时或发现可弹出元素为止。</td></tr></tbody></table><p>思考：</p><p>利用 LIst 结构模拟一个栈</p><ul><li>入口和出口在同一侧（L或者R），存取数据用LPUSH+LPOP结合（或都是R）</li></ul><p>利用 List 结构模拟一个队列</p><ul><li>入口和出口在不同侧，存取数据用首尾结合方式（LPUSH+RPOP）（或RL）</li></ul><p>利用 List 结构模拟一个阻塞队列</p><ul><li>入口和出口在不同侧</li><li>出队时采用 BLPOP 或 BRPOP</li></ul><h2 id="使用场景-2"><a href="#使用场景-2" class="headerlink" title="使用场景"></a>使用场景</h2><p>存储有序的字符串列表。如消息队列、最新消息列表等。</p><h1 id="Set-类型"><a href="#Set-类型" class="headerlink" title="Set 类型"></a>Set 类型</h1><p>是 String 类型的无序集合。集合成员是唯一的，即集合中不能出现重复的数据。</p><p>集合对象的编码可以是 intset 或者 hashtable。</p><p>Redis 中集合是通过哈希表实现的，所以添加，删除，查找的复杂度都是 O(1)。</p><p>类似 Java 的 HashSet。</p><p>特征：</p><ul><li>无序</li><li>元素不可重复</li><li>查询速度快</li><li>支持交集、并集、差集等功能</li></ul><h2 id="Set-常用命令"><a href="#Set-常用命令" class="headerlink" title="Set 常用命令"></a>Set 常用命令</h2><table><thead><tr><th>序号</th><th>命令</th><th>描述</th></tr></thead><tbody><tr><td>1</td><td><a target="_blank" rel="noopener" href="https://www.runoob.com/redis/sets-sadd.html">SADD</a> key member1 [member2]</td><td>向集合添加一个或多个元素</td></tr><tr><td>2</td><td><a target="_blank" rel="noopener" href="https://www.runoob.com/redis/sets-srem.html">SREM</a> key member1 [member2]</td><td>移除集合中一个或多个元素</td></tr><tr><td>3</td><td><a target="_blank" rel="noopener" href="https://www.runoob.com/redis/sets-scard.html">SCARD</a> key</td><td>获取集合的成员数（元素个数）</td></tr><tr><td>4</td><td><a target="_blank" rel="noopener" href="https://www.runoob.com/redis/sets-sismember.html">SISMEMBER</a> key member</td><td>判断 member 元素是否是集合 key 的成员</td></tr><tr><td>5</td><td><a target="_blank" rel="noopener" href="https://www.runoob.com/redis/sets-smembers.html">SMEMBERS</a> key</td><td>返回集合中的所有元素</td></tr><tr><td>6</td><td><a target="_blank" rel="noopener" href="https://www.runoob.com/redis/sets-sinter.html">SINTER</a> key1 [key2]</td><td>返回给定所有集合的交集</td></tr><tr><td>7</td><td><a target="_blank" rel="noopener" href="https://www.runoob.com/redis/sets-sdiff.html">SDIFF</a> key1 [key2]</td><td>返回第一个集合与其他集合之间的差异（差集）。</td></tr><tr><td>8</td><td><a target="_blank" rel="noopener" href="https://www.runoob.com/redis/sets-sunion.html">SUNION</a> key1 [key2]</td><td>返回所有给定集合的并集</td></tr></tbody></table><h2 id="使用场景-3"><a href="#使用场景-3" class="headerlink" title="使用场景"></a>使用场景</h2><p>存储无序的唯一元素，如标签、好友列表等。</p><h1 id="SortedSet-类型"><a href="#SortedSet-类型" class="headerlink" title="SortedSet 类型"></a>SortedSet 类型</h1><p>Redis 的 SortedSet 是一个可排序的 set 集合。</p><p>SortedSet 中每个元素都会关联一个 double 类型的分数 score，可以基于 score 属性对元素排序，底层的实现是一个跳表（SkipList）+ hash 表。</p><p>有序集合的成员不可重复，但 score 可重复。</p><p>与 Java 中的 TreeSet 类似，但底层数据结构差别很大。</p><p>特征：</p><ul><li>可排序</li><li>元素不可重复</li><li>查询速度快</li></ul><p>因为 SortedSet 的可排序性，经常被用来实现排行榜这样的功能。</p><h2 id="SortedSet-常用命令"><a href="#SortedSet-常用命令" class="headerlink" title="SortedSet 常用命令"></a>SortedSet 常用命令</h2><table><thead><tr><th>命令</th><th>描述</th></tr></thead><tbody><tr><td><a target="_blank" rel="noopener" href="https://www.runoob.com/redis/sorted-sets-zadd.html">ZADD</a> key score1 member1 [score2 member2]</td><td>向有序集合添加一个或多个成员，若已存在则更新其 score 值</td></tr><tr><td><a target="_blank" rel="noopener" href="https://www.runoob.com/redis/sorted-sets-zrem.html">ZREM</a> key member [member …]</td><td>移除有序集合中的一个或多个成员</td></tr><tr><td><a target="_blank" rel="noopener" href="https://www.runoob.com/redis/sorted-sets-zscore.html">ZSCORE</a> key member</td><td>返回有序集中，成员的 score 值</td></tr><tr><td><a target="_blank" rel="noopener" href="https://www.runoob.com/redis/sorted-sets-zrank.html">ZRANK</a> key member</td><td>返回有序集合中指定成员的排名（索引）</td></tr><tr><td><a target="_blank" rel="noopener" href="https://www.runoob.com/redis/sorted-sets-zcard.html">ZCARD</a> key</td><td>获取有序集合的成员个数</td></tr><tr><td><a target="_blank" rel="noopener" href="https://www.runoob.com/redis/sorted-sets-zcount.html">ZCOUNT</a> key min max</td><td>计算在有序集合中指定区间分数的成员数</td></tr><tr><td><a target="_blank" rel="noopener" href="https://www.runoob.com/redis/sorted-sets-zincrby.html">ZINCRBY</a> key increment member</td><td>有序集合中对指定成员的分数加上增量 increment</td></tr><tr><td><a target="_blank" rel="noopener" href="https://www.runoob.com/redis/sorted-sets-zrange.html">ZRANGE</a> key start stop [WITHSCORES]</td><td>通过索引区间返回有序集合指定区间内的成员</td></tr><tr><td><a target="_blank" rel="noopener" href="https://www.runoob.com/redis/sorted-sets-zrangebyscore.html">ZRANGEBYSCORE</a> key min max [WITHSCORES] [LIMIT]</td><td>通过分数返回有序集合指定区间内的成员</td></tr><tr><td>ZDIFF、ZINTER、ZUNION</td><td>求差集、交集、并集</td></tr></tbody></table><p>注意：所有的排名默认都是升序，如果要降序则在命令的 Z 后添加 REV 即可，如：</p><h2 id="使用场景-4"><a href="#使用场景-4" class="headerlink" title="使用场景"></a>使用场景</h2><p>存储有序的唯一元素，每个元素都关联一个分数，常用于排行榜、计分系统等。</p><h1 id="使用场景分析"><a href="#使用场景分析" class="headerlink" title="使用场景分析"></a>使用场景分析</h1><ul><li><strong>缓存</strong>：使用<strong>字符串</strong>存储缓存数据，列表存储消息队列，集合存储用户标签等。</li><li><strong>计数器</strong>：使用<strong>字符串的 INCR 命令</strong>实现计数器功能。</li><li><strong>会话管理</strong>：使用<strong>哈希表</strong>存储用户会话信息，如用户登录状态、权限等。</li><li><strong>发布订阅</strong>：使用发布订阅功能实现消息广播。</li><li><strong>排行榜</strong>：使用<strong>有序集合</strong>存储用户分数，实现排行榜功能。</li><li><strong>实时统计</strong>：使用<strong>计数器</strong>、<strong>有序集合</strong>等数据结构实现实时统计功能。</li></ul></div><hr><div><div class="post-metas my-3"><div class="post-meta mr-3 d-flex align-items-center"><i class="iconfont icon-category"></i> <span class="category-chains"><span class="category-chain"><a href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/" class="category-chain-item">数据库</a> <span>></span> <a href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/Redis/" class="category-chain-item">Redis</a></span></span></div><div class="post-meta"><i class="iconfont icon-tags"></i> <a href="/tags/Redis/" class="print-no-link">#Redis</a></div></div><div class="license-box my-3"><div class="license-title"><div>Redis数据类型</div><div>https://blog-21n.pages.dev/2023/03/08/Redis数据类型/</div></div><div class="license-meta"><div class="license-meta-item"><div>作者</div><div>Neo</div></div><div class="license-meta-item license-meta-date"><div>发布于</div><div>2023年3月8日</div></div><div class="license-meta-item"><div>许可协议</div><div><a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/"><span class="hint--top hint--rounded" aria-label="BY - 署名"><i class="iconfont icon-cc-by"></i></span></a></div></div></div><div class="license-icon iconfont"></div></div><div class="post-prevnext my-3"><article class="post-prev col-6"><a href="/2023/04/04/Python%E8%A7%A3%E6%9E%90XML/" title="Python解析XML"><i class="iconfont icon-arrowleft"></i> <span class="hidden-mobile">Python解析XML</span> <span class="visible-mobile">上一篇</span></a></article><article class="post-next col-6"><a href="/2023/03/08/Redis%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE/" title="Redis安装配置"><span class="hidden-mobile">Redis安装配置</span> <span class="visible-mobile">下一篇</span> <i class="iconfont icon-arrowright"></i></a></article></div></div></article></div></div></div><div class="side-col d-none d-lg-block col-lg-2"><aside class="sidebar" style="margin-left:-1rem"><div id="toc"><p class="toc-header"><i class="iconfont icon-list"></i> <span>目录</span></p><div class="toc-body" id="toc-body"></div></div></aside></div></div></div><a id="scroll-top-button" aria-label="TOP" href="#" role="button"><i class="iconfont icon-arrowup" aria-hidden="true"></i></a><div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable modal-lg" role="document"><div class="modal-content"><div class="modal-header text-center"><h4 class="modal-title w-100 font-weight-bold">搜索</h4><button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></div><div class="modal-body mx-3"><div class="md-form mb-5"><input type="text" id="local-search-input" class="form-control validate"> <label data-error="x" data-success="v" for="local-search-input">关键词</label></div><div class="list-group" id="local-search-result"></div></div></div></div></div></main><footer><div class="footer-inner"><div class="footer-content"><a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a></div><div class="statistics"><span id="busuanzi_container_site_pv" style="display:none">总访问量 <span id="busuanzi_value_site_pv"></span> 次 </span><span id="busuanzi_container_site_uv" style="display:none">总访客数 <span id="busuanzi_value_site_uv"></span> 人</span></div></div></footer><script src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js"></script><link rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css"><script>NProgress.configure({showSpinner:!1,trickleSpeed:100}),NProgress.start(),window.addEventListener("load",(function(){NProgress.done()}))</script><script src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js"></script><script src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js"></script><script src="/js/events.js"></script><script src="/js/plugins.js"></script><script src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js"></script><script>!function(t,e){var i=Fluid.plugins.typing,n=e.getElementById("subtitle");n&&i&&i(n.getAttribute("data-typed-text"))}(window,document)</script><script src="/js/img-lazyload.js"></script><script>Fluid.utils.createScript("https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js",(function(){var t=jQuery("#toc");if(0!==t.length&&window.tocbot){var i=jQuery("#board-ctn").offset().top;window.tocbot.init(Object.assign({tocSelector:"#toc-body",contentSelector:".markdown-body",linkClass:"tocbot-link",activeLinkClass:"tocbot-active-link",listClass:"tocbot-list",isCollapsedClass:"tocbot-is-collapsed",collapsibleClass:"tocbot-is-collapsible",scrollSmooth:!0,includeTitleTags:!0,headingsOffset:-i},CONFIG.toc)),t.find(".toc-list-item").length>0&&t.css("visibility","visible"),Fluid.events.registerRefreshCallback((function(){if("tocbot"in window){tocbot.refresh();var t=jQuery("#toc");if(0===t.length||!tocbot)return;t.find(".toc-list-item").length>0&&t.css("visibility","visible")}}))}}))</script><script src="https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js"></script><script>Fluid.plugins.codeWidget()</script><script>Fluid.utils.createScript("https://lib.baomitu.com/anchor-js/5.0.0/anchor.min.js",(function(){window.anchors.options={placement:CONFIG.anchorjs.placement,visible:CONFIG.anchorjs.visible},CONFIG.anchorjs.icon&&(window.anchors.options.icon=CONFIG.anchorjs.icon);var n=(CONFIG.anchorjs.element||"h1,h2,h3,h4,h5,h6").split(","),o=[];for(var s of n)o.push(".markdown-body > "+s.trim());"left"===CONFIG.anchorjs.placement&&(window.anchors.options.class="anchorjs-link-left"),window.anchors.add(o.join(", ")),Fluid.events.registerRefreshCallback((function(){if("anchors"in window){anchors.removeAll();var n=(CONFIG.anchorjs.element||"h1,h2,h3,h4,h5,h6").split(","),o=[];for(var s of n)o.push(".markdown-body > "+s.trim());"left"===CONFIG.anchorjs.placement&&(anchors.options.class="anchorjs-link-left"),anchors.add(o.join(", "))}}))}))</script><script>Fluid.utils.createScript("https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js",(function(){Fluid.plugins.fancyBox()}))</script><script>Fluid.plugins.imageCaption()</script><script src="/js/local-search.js"></script><script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="/js/boot.js"></script><noscript><div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div></noscript></body></html>