<!DOCTYPE html><html lang="zh-CN" data-default-color-scheme="auto"><head><meta charset="UTF-8"><link rel="apple-touch-icon" sizes="76x76" href="/img/avatar.png"><link rel="icon" href="/img/avatar.png"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=5,shrink-to-fit=no"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="theme-color" content="#2f4154"><meta name="author" content="Neo"><meta name="keywords" content=""><meta name="description" content="一、Redis 简介Redis（Remote Dictionary Server），远程词典服务器，是一个基于内存的键值型 NoSQL 数据库。 特征  键值型，value 支持多种不同数据结构 单线程，每个命令具备原子性。意思是要么成功执行要么失败完全不执行。 低延迟，速度快（基于内存、IO多路复用、良好的编码） 支持数据持久化 支持主从集群、分片集群  二、什么是NoSQLNoSQL，指的是非"><meta property="og:type" content="article"><meta property="og:title" content="Redis安装配置"><meta property="og:url" content="https://blog-21n.pages.dev/2023/03/08/Redis%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE/index.html"><meta property="og:site_name" content="KingShit"><meta property="og:description" content="一、Redis 简介Redis（Remote Dictionary Server），远程词典服务器，是一个基于内存的键值型 NoSQL 数据库。 特征  键值型，value 支持多种不同数据结构 单线程，每个命令具备原子性。意思是要么成功执行要么失败完全不执行。 低延迟，速度快（基于内存、IO多路复用、良好的编码） 支持数据持久化 支持主从集群、分片集群  二、什么是NoSQLNoSQL，指的是非"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://pub-e9bde05ffea74978a0ce3b387e7ee1fd.r2.dev/2024/08/redis%E9%BB%98%E8%AE%A4%E5%AE%89%E8%A3%85%E7%9B%AE%E5%BD%95.png"><meta property="og:image" content="https://pub-e9bde05ffea74978a0ce3b387e7ee1fd.r2.dev/2024/08/redis-server%E5%91%BD%E4%BB%A4%E5%90%AF%E5%8A%A8.png"><meta property="og:image" content="https://pub-e9bde05ffea74978a0ce3b387e7ee1fd.r2.dev/2024/08/DHCP%E8%AE%BE%E7%BD%AE.png"><meta property="og:image" content="https://pub-e9bde05ffea74978a0ce3b387e7ee1fd.r2.dev/2024/08/%E8%99%9A%E6%8B%9F%E7%BD%91%E7%BB%9C%E7%BC%96%E8%BE%91%E5%99%A8.png"><meta property="og:image" content="https://pub-e9bde05ffea74978a0ce3b387e7ee1fd.r2.dev/2024/08/%E7%BD%91%E5%85%B3IP.png"><meta property="og:image" content="https://pub-e9bde05ffea74978a0ce3b387e7ee1fd.r2.dev/2024/08/IP%E8%8C%83%E5%9B%B4.png"><meta property="og:image" content="https://pub-e9bde05ffea74978a0ce3b387e7ee1fd.r2.dev/2024/08/%E7%BD%91%E5%8D%A1%E9%85%8D%E7%BD%AE.png"><meta property="article:published_time" content="2023-03-08T02:25:00.000Z"><meta property="article:modified_time" content="2024-08-09T17:48:51.766Z"><meta property="article:author" content="Neo"><meta property="article:tag" content="Redis"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image" content="https://pub-e9bde05ffea74978a0ce3b387e7ee1fd.r2.dev/2024/08/redis%E9%BB%98%E8%AE%A4%E5%AE%89%E8%A3%85%E7%9B%AE%E5%BD%95.png"><meta name="referrer" content="no-referrer-when-downgrade"><title>Redis安装配置 - KingShit</title><link rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css"><link rel="stylesheet" href="//at.alicdn.com/t/c/font_1749284_5i9bdhy70f8.css"><link rel="stylesheet" href="//at.alicdn.com/t/c/font_1736178_k526ubmyhba.css"><link rel="stylesheet" href="/css/main.css"><link id="highlight-css" rel="stylesheet" href="/css/highlight.css"><link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css"><script id="fluid-configs">var Fluid=window.Fluid||{};Fluid.ctx=Object.assign({},Fluid.ctx);var CONFIG={hostname:"blog-21n.pages.dev",root:"/",version:"1.9.8",typing:{enable:!0,typeSpeed:70,cursorChar:"_",loop:!1,scope:[]},anchorjs:{enable:!0,element:"h1,h2,h3,h4,h5,h6",placement:"left",visible:"hover",icon:""},progressbar:{enable:!0,height_px:3,color:"#29d",options:{showSpinner:!1,trickleSpeed:100}},code_language:{enable:!0,default:"TEXT"},copy_btn:!0,image_caption:{enable:!0},image_zoom:{enable:!0,img_url_replace:["",""]},toc:{enable:!0,placement:"right",headingSelector:"h1,h2,h3,h4,h5,h6",collapseDepth:0},lazyload:{enable:!0,loading_img:"/img/loading.gif",onlypost:!1,offset_factor:2},web_analytics:{enable:!1,follow_dnt:!0,baidu:null,google:{measurement_id:null},tencent:{sid:null,cid:null},leancloud:{app_id:null,app_key:null,server_url:null,path:"window.location.pathname",ignore_local:!1},umami:{src:null,website_id:null,domains:null,start_time:"2024-01-01T00:00:00.000Z",token:null,api_server:null}},search_path:"/local-search.xml",include_content_in_search:!0};if(CONFIG.web_analytics.follow_dnt){var dntVal=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack;Fluid.ctx.dnt=dntVal&&(dntVal.startsWith("1")||dntVal.startsWith("yes")||dntVal.startsWith("on"))}</script><script src="/js/utils.js"></script><script src="/js/color-schema.js"></script><script>!function(){var o;if("boxpiggy.github.io"===window.location.hostname?o="https://boxpiggy.github.io/live2d-widget/autoload.js":"blog-21n.pages.dev"===window.location.hostname&&(o="https://blog-21n.pages.dev/live2d-widget/autoload.js"),o){var t=document.createElement("script");t.src=o,document.head.appendChild(t)}}()</script><meta name="generator" content="Hexo 6.3.0"></head><body><header><div class="header-inner" style="height:70vh"><nav id="navbar" class="navbar fixed-top navbar-expand-lg navbar-dark scrolling-navbar"><div class="container"><a class="navbar-brand" href="/"><strong>Neo&#39;s blog</strong> </a><button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><div class="animated-icon"><span></span><span></span><span></span></div></button><div class="collapse navbar-collapse" id="navbarSupportedContent"><ul class="navbar-nav ml-auto text-center"><li class="nav-item"><a class="nav-link" href="/" target="_self"><i class="iconfont icon-home-fill"></i> <span>首页</span></a></li><li class="nav-item"><a class="nav-link" href="/archives/" target="_self"><i class="iconfont icon-archive-fill"></i> <span>归档</span></a></li><li class="nav-item"><a class="nav-link" href="/categories/" target="_self"><i class="iconfont icon-category-fill"></i> <span>分类</span></a></li><li class="nav-item"><a class="nav-link" href="/tags/" target="_self"><i class="iconfont icon-tags-fill"></i> <span>标签</span></a></li><li class="nav-item"><a class="nav-link" href="/about/" target="_self"><i class="iconfont icon-user-fill"></i> <span>关于</span></a></li><li class="nav-item" id="search-btn"><a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search"><i class="iconfont icon-search"></i></a></li><li class="nav-item" id="color-toggle-btn"><a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle"><i class="iconfont icon-dark" id="color-toggle-icon"></i></a></li></ul></div></div></nav><div id="banner" class="banner" parallax="true" style="background:url(/img/default.png) no-repeat center center;background-size:cover"><div class="full-bg-img"><div class="mask flex-center" style="background-color:rgba(0,0,0,.3)"><div class="banner-text text-center fade-in-up"><div class="h2"><span id="subtitle" data-typed-text="Redis安装配置"></span></div><div class="mt-3"><span class="post-meta"><i class="iconfont icon-date-fill" aria-hidden="true"></i> <time datetime="2023-03-08 10:25" pubdate>2023年3月8日 上午</time></span></div><div class="mt-1"><span class="post-meta mr-2"><i class="iconfont icon-chart"></i> 2.4k 字 </span><span class="post-meta mr-2"><i class="iconfont icon-clock-fill"></i> 21 分钟</span></div></div></div></div></div></div></header><main><div class="container-fluid nopadding-x"><div class="row nomargin-x"><div class="side-col d-none d-lg-block col-lg-2"></div><div class="col-lg-8 nopadding-x-md"><div class="container nopadding-x-md" id="board-ctn"><div id="board"><article class="post-content mx-auto"><h1 id="seo-header">Redis安装配置</h1><div class="markdown-body"><h1 id="一、Redis-简介"><a href="#一、Redis-简介" class="headerlink" title="一、Redis 简介"></a>一、Redis 简介</h1><p>Redis（Remote Dictionary Server），远程词典服务器，是一个基于内存的键值型 NoSQL 数据库。</p><p>特征</p><ul><li>键值型，value 支持多种不同数据结构</li><li>单线程，每个命令具备原子性。意思是要么成功执行要么失败完全不执行。</li><li>低延迟，速度快（基于内存、IO多路复用、良好的编码）</li><li>支持数据持久化</li><li>支持主从集群、分片集群</li></ul><h1 id="二、什么是NoSQL"><a href="#二、什么是NoSQL" class="headerlink" title="二、什么是NoSQL"></a>二、什么是NoSQL</h1><p>NoSQL，指的是非关系型的数据库。NoSQL有时也称作Not Only SQL的缩写，是对不同于传统的关系型数据库的数据库管理系统的统称。</p><ul><li>没有声明性查询语言</li><li>没有预定义的模式</li><li>键 - 值对存储，列存储，文档存储，图形数据库</li><li>最终一致性，而非ACID属性</li><li>非结构化和不可预知的数据</li><li>CAP定理</li><li>高性能，高可用性和可伸缩性</li></ul><h1 id="三、Redis-服务安装"><a href="#三、Redis-服务安装" class="headerlink" title="三、Redis 服务安装"></a>三、Redis 服务安装</h1><h2 id="3-1-下载"><a href="#3-1-下载" class="headerlink" title="3.1 下载"></a>3.1 下载</h2><p>Redis 使用标准的做法进行版本管理: 主版本号.副版本号.补丁号。 偶数 副版本号 表示一个 稳定的 发布，像 1.2, 2.0, 2.2, 2.4, 2.6, 2.8。奇数副版本号表示 不稳定的 发布，例如 2.9.x 发布是一个不稳定版本，下一个稳定版本将会是Redis 3.0。</p><p>Redis 最新的稳定版本可以在 <a target="_blank" rel="noopener" href="https://download.redis.io/redis-stable.tar.gz">https://download.redis.io/redis-stable.tar.gz</a> 下载 。 相应的 SHA256 校验和 <a target="_blank" rel="noopener" href="https://download.redis.io/redis-stable.tar.gz.SHA256SUM%E3%80%82">https://download.redis.io/redis-stable.tar.gz.SHA256SUM。</a> 最新稳定版本的源码可以在 <a target="_blank" rel="noopener" href="https://download.redis.io/redis-stable">这里获得 ,</a> 使用 <strong>src&#x2F;version.h</strong> 文件以便可以自动获取版本信息。更多：<a target="_blank" rel="noopener" href="https://redis.com.cn/download.html">Redis下载和安装</a>。</p><p>Linux版（官网）：<a target="_blank" rel="noopener" href="https://redis.io/">https://redis.io/</a></p><p>在线下载：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">wget http://download.redis.io/releases/redis-x.x.x.tar.gz<br></code></pre></td></tr></table></figure><p>Windows版：<a target="_blank" rel="noopener" href="https://github.com/tporadowski/redis/releases%EF%BC%88%E5%AE%98%E6%96%B9%E5%B9%B6%E6%B2%A1%E6%9C%89%E6%8F%90%E4%BE%9Bwin%E7%89%88%EF%BC%8Cwin%E7%89%88%E6%98%AF%E5%BE%AE%E8%BD%AF%E7%BC%96%E8%AF%91%E7%9A%84%EF%BC%89">https://github.com/tporadowski/redis/releases（官方并没有提供win版，win版是微软编译的）</a></p><h2 id="3-2-单机安装"><a href="#3-2-单机安装" class="headerlink" title="3.2 单机安装"></a>3.2 单机安装</h2><h3 id="3-2-1-安装-Redis-依赖"><a href="#3-2-1-安装-Redis-依赖" class="headerlink" title="3.2.1 安装 Redis 依赖"></a>3.2.1 安装 Redis 依赖</h3><p>Redis 是基于 C 语言编写的，因此首先需要安装 Redis 所需要的 gcc 依赖：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">yum install -y gcc tcl<br></code></pre></td></tr></table></figure><h3 id="3-2-2-上传安装包并解压"><a href="#3-2-2-上传安装包并解压" class="headerlink" title="3.2.2 上传安装包并解压"></a>3.2.2 上传安装包并解压</h3><h4 id="3-2-2-1-上传"><a href="#3-2-2-1-上传" class="headerlink" title="3.2.2.1 上传"></a>3.2.2.1 上传</h4><p>把安装包上传到 Linux 服务器任意目录（在 Linux 下载可跳过此步），例如，我放到了<code>usr/local/src</code>目录。</p><h4 id="3-2-2-2-解压缩"><a href="#3-2-2-2-解压缩" class="headerlink" title="3.2.2.2 解压缩"></a>3.2.2.2 解压缩</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">tar -xzf redis-7.0.9.tar.gz<br></code></pre></td></tr></table></figure><h4 id="3-2-2-3-安装"><a href="#3-2-2-3-安装" class="headerlink" title="3.2.2.3 安装"></a>3.2.2.3 安装</h4><p>进入到redis目录，安装：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">make &amp;&amp; make install<br></code></pre></td></tr></table></figure><p>默认的安装路径是在<code>/usr/local/bin</code>目录下：</p><p><img src="https://pub-e9bde05ffea74978a0ce3b387e7ee1fd.r2.dev/2024/08/redis%E9%BB%98%E8%AE%A4%E5%AE%89%E8%A3%85%E7%9B%AE%E5%BD%95.png" srcset="/img/loading.gif" lazyload alt="redis默认安装目录"></p><p>该目录已经默认配置到环境变量，因此可以在任意目录下运行命令。其中：</p><ul><li>redis-cli：是 redis 提供的命令行客户端</li><li>redis-server：是 redis 的服务端启动脚本</li><li>redis-sentinel：是 redis 的哨兵启动脚本</li></ul><h2 id="3-3-Redis-启动"><a href="#3-3-Redis-启动" class="headerlink" title="3.3 Redis 启动"></a>3.3 Redis 启动</h2><p>redis 的启动方式有很多种，如：</p><ul><li>默认启动</li><li>指定配置启动</li><li>开机自启</li></ul><h3 id="3-3-1-默认启动（不推荐）"><a href="#3-3-1-默认启动（不推荐）" class="headerlink" title="3.3.1 默认启动（不推荐）"></a>3.3.1 默认启动（不推荐）</h3><p>使用 <code>redis-server</code> 命令即可启动 Redis：</p><p><img src="https://pub-e9bde05ffea74978a0ce3b387e7ee1fd.r2.dev/2024/08/redis-server%E5%91%BD%E4%BB%A4%E5%90%AF%E5%8A%A8.png" srcset="/img/loading.gif" lazyload alt="redis-server命令启动"></p><p>这种启动属于前台启动，会阻塞整个会话窗口，窗口关闭 Redis 会停止，不推荐使用。</p><h3 id="3-3-2-指定配置启动"><a href="#3-3-2-指定配置启动" class="headerlink" title="3.3.2 指定配置启动"></a>3.3.2 指定配置启动</h3><p>后台启动必须修改 Redis 配置文件，位于解压后的目录内：<code>/usr/local/src/redis-6.2.6/redis.conf</code>。</p><p>先将配置文件进行备份：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">cp redis.conf redis.conf.bck<br></code></pre></td></tr></table></figure><p>然后修改<code>redis.conf</code>文件中的配置：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">守护进程，修改为 <span class="hljs-built_in">yes</span> 后即可后台运行</span><br>daemonize yes<br></code></pre></td></tr></table></figure><p>启动 Redis：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">进入 redis 安装目录</span><br>cd /usr/local/src/redis=6.2.6<br><span class="hljs-meta prompt_"># </span><span class="language-bash">启动</span><br>redis-server redis.conf<br></code></pre></td></tr></table></figure><p>停止 Redis：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">利用redis-cli执行shutdown命令，停止redis服务</span><br>redis-cli shutdown<br><span class="hljs-meta prompt_"># </span><span class="language-bash">如果配置了密码，需要加上-u参数指定密码</span><br>redis-cli -u 123456 shutdown<br></code></pre></td></tr></table></figure><h3 id="3-3-3-开机自启"><a href="#3-3-3-开机自启" class="headerlink" title="3.3.3 开机自启"></a>3.3.3 开机自启</h3><ol><li>新建系统服务文件：</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">vi /etc/systemd/system/redis.service<br></code></pre></td></tr></table></figure><p>关于 &#x2F;etc&#x2F;systemd&#x2F;system 目录更多请参考：<a target="_blank" rel="noopener" href="https://www.yuque.com/kingshit/wz61vk/lcigqnkrd2ndd557">关于system目录</a></p><p>新增内容：</p><p>注意<code>ExecStart</code>的内容要修改为自己服务器的实际路径</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs plain">[Unit]<br>Description=redis-server<br>After=network.target<br><br>[Service]<br>Type=forking<br>ExecStart=/usr/local/bin/redis-server /usr/local/src/redis-6.2.6/redis.conf<br>PrivateTmp=true<br><br>[Install]<br>WantedBy=multi-user.target<br></code></pre></td></tr></table></figure><ol><li>重载系统服务：</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">systemctl daemon-reload<br></code></pre></td></tr></table></figure><ol><li>现在就可以用下面这组命令来操作 redis 了：</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">启动</span><br>systemctl start redis<br><span class="hljs-meta prompt_"># </span><span class="language-bash">停止</span><br>systemctl stop redis<br><span class="hljs-meta prompt_"># </span><span class="language-bash">重启</span><br>systemctl restart redis<br><span class="hljs-meta prompt_"># </span><span class="language-bash">查看状态</span><br>systemctl status redis<br></code></pre></td></tr></table></figure><ol><li>执行下面的命令，让 redis 开机自启：</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">systemctl enable redis<br></code></pre></td></tr></table></figure><h1 id="四、Redis-配置文件"><a href="#四、Redis-配置文件" class="headerlink" title="四、Redis 配置文件"></a>四、Redis 配置文件</h1><h2 id="4-1-查看配置项"><a href="#4-1-查看配置项" class="headerlink" title="4.1 查看配置项"></a>4.1 查看配置项</h2><h2 id="4-2-更改配置项"><a href="#4-2-更改配置项" class="headerlink" title="4.2 更改配置项"></a>4.2 更改配置项</h2><h2 id="4-3-更改配置文件"><a href="#4-3-更改配置文件" class="headerlink" title="4.3 更改配置文件"></a>4.3 更改配置文件</h2><p>Redis 某些配置信息无法直接通过命令修改，此时就需要修改配置文件。</p><p>比如设置 Redis 允许远程连接的功能：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">注释掉本地IP地址,绑定要访问的外部IP</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash"><span class="hljs-built_in">bind</span> 127.0.0.1 ::1</span><br>bind 192.168.75.129           # listens on specific IPv4 addresses<br><span class="hljs-meta prompt_"># </span><span class="language-bash">关闭保护模式(把<span class="hljs-built_in">yes</span>改为no)</span><br>protected-mode no<br><span class="hljs-meta prompt_"># </span><span class="language-bash">Linux重启</span><br>sudo /etc/init.d/redis-server restart<br></code></pre></td></tr></table></figure><h2 id="4-4-常用配置"><a href="#4-4-常用配置" class="headerlink" title="4.4 常用配置"></a>4.4 常用配置</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">监听的地址，默认是 127.0.0.1，会导致只能在本地访问。修改为 0.0.0.0 则可以在任意IP访问</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">注意：生产环境不要设置为 0.0.0.0</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash"><span class="hljs-built_in">bind</span> 127.0.0.1 -::1</span><br>bind 0.0.0.0<br><span class="hljs-meta prompt_"># </span><span class="language-bash">守护进程，修改为 <span class="hljs-built_in">yes</span> 后即可后台运行</span><br>daemonize yes<br><span class="hljs-meta prompt_"># </span><span class="language-bash">密码，设置后访问 Redis 必须输入密码</span><br>requirepass 123456<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">监听的端口</span><br>port 6379<br><span class="hljs-meta prompt_"># </span><span class="language-bash">工作目录，默认是当前目录，即运行 redis-server 时的命令，日志、持久化等文件会保存在这个目录</span><br>dir .<br><span class="hljs-meta prompt_"># </span><span class="language-bash">数据库数量，设置为1，代表只使用1个库，默认有16个库，编号0~15</span><br>databases 1<br><span class="hljs-meta prompt_"># </span><span class="language-bash">设置 redis 能够使用的最大内存</span><br>maxmemory 512mb<br><span class="hljs-meta prompt_"># </span><span class="language-bash">日志文件，默认为空，不记录日志，可以指定日志文件名</span><br>logfile &quot;redis.log&quot;<br></code></pre></td></tr></table></figure><blockquote><p>vim 常用指令：</p><p><code>/pattern</code>：向后查找字符串pattern</p><p><code>?pattern</code>：向前搜索字符串pattern</p><p><code>n</code>： 下一个匹配(如果是&#x2F;搜索，则是向下的下一个，?搜索则是向上的下一个)</p><p><code>N</code>：上一个匹配(同上)</p><p><code>u</code>：撤销</p></blockquote><h2 id="4-5-其它配置说明"><a href="#4-5-其它配置说明" class="headerlink" title="4.5 其它配置说明"></a>4.5 其它配置说明</h2><table><thead><tr><th>配置项</th><th>参数</th><th>说明</th></tr></thead><tbody><tr><td>daemonize</td><td>no&#x2F;yes</td><td>默认为 no，表示 Redis 不是以守护进程的方式运行，通过修改为 yes 启用守护进程。</td></tr><tr><td>pidfile</td><td>文件路径</td><td>当 Redis 以守护进程方式运行时，会把进程 pid 写入自定义的文件中。</td></tr><tr><td>port</td><td>6379</td><td>指定 Redis 监听端口，默认端口为 6379。</td></tr><tr><td>bind</td><td>127.0.0.1</td><td>绑定的主机地址。</td></tr><tr><td>timeout</td><td>0</td><td>客户端闲置多长秒后关闭连接，若指定为 0 ，表示不启用该功能。</td></tr><tr><td>loglevel</td><td>notice</td><td>指定日志记录级别，支持四个级别：debug、verbose、notice、warning，默认为 notice。</td></tr><tr><td>logfile</td><td>stdout</td><td>日志记录方式，默认为标准输出。</td></tr><tr><td>databases</td><td>16</td><td>设置数据库的数量（0-15个）共16个，Redis 默认选择的是 0 库，可以使用 SELECT 命令来选择使用哪个数据库储存数据。</td></tr><tr><td>save[seconds][changes]</td><td>可以同时配置三种模式：save 900 1save 300 10save 60 10000</td><td>表示在规定的时间内，执行了规定次数的写入或修改操作，Redis 就会将数据同步到指定的磁盘文件中。比如 900s 内做了一次更改，Redis 就会自动执行数据同步。</td></tr><tr><td>rdbcompression</td><td>yes&#x2F;no</td><td>当数据存储至本地数据库时是否要压缩数据，默认为 yes。</td></tr><tr><td>dbfilename</td><td>dump.rdb</td><td>指定本地存储数据库的文件名，默认为 dump.rdb。</td></tr><tr><td>dir</td><td>.&#x2F;</td><td>指定本地数据库存放目录。</td></tr><tr><td>slaveof</td><td>主从复制配置选项</td><td>当本机为 slave 服务时，设置 master 服务的 IP 地址及端口，在 Redis 启动时，它会自动与 master 主机进行数据同步。</td></tr><tr><td>requirepass</td><td>foobared 默认关闭</td><td>密码配置项，默认关闭，用于设置 Redis 连接密码。如果配置了连接密码，客户端连接 Redis 时需要通过 密码认证。</td></tr><tr><td>maxmemory</td><td>最大内存限制配置项</td><td>指定 Redis 最大内存限制，Redis 在启动时会把数据加载到内存中，达到最大内存后，Redis 会尝试清除已到期或即将到期的 Key，当此方法处理 后，若仍然到达最大内存设置，将无法再进行写入操作，但可以进行读取操作。</td></tr><tr><td>appendfilename</td><td>appendonly.aof</td><td>指定 AOF 持久化时保存数据的文件名，默认为 appendonly.aof。</td></tr><tr><td>glueoutputbuf</td><td>yes</td><td>设置向客户端应答时，是否把较小的包合并为一个包发送，默认开启状态。</td></tr></tbody></table><h1 id="五、常见问题"><a href="#五、常见问题" class="headerlink" title="五、常见问题"></a>五、常见问题</h1><h2 id="5-1-无法连接到远程redis服务器"><a href="#5-1-无法连接到远程redis服务器" class="headerlink" title="5.1 无法连接到远程redis服务器"></a>5.1 无法连接到远程redis服务器</h2><p><strong>①：检查是否ping通（略）</strong></p><p><strong>②：查看端口是否打开</strong></p><p>参考：<a href="https://blog-21n.pages.dev/2023/05/23/%E5%BC%80%E6%94%BE%E7%AB%AF%E5%8F%A3/">开放端口</a></p><p>一般到第②步就成功了，如果不行就继续往下</p><p><strong>③：关闭防火墙</strong></p><p>检查防火墙状态（是否 <code>dead</code> 状态）</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">systemctl status iptables<br>systemctl status firewalld<br></code></pre></td></tr></table></figure><p>关闭防火墙两种方式：</p><p>iptables 形式防火墙关闭</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">service iptables stop<br>chkconfig iptables off # 永久关闭<br></code></pre></td></tr></table></figure><p>firewalld 形式防火墙关闭</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">systemctl stop firewalld &amp;&amp; systemctl disable firewalld <br>chkconfig firewalld off # 永久关闭<br></code></pre></td></tr></table></figure><p><strong>④：修改</strong><code>**redis.conf**</code><strong>配置文件</strong></p><p>（参考<a target="_blank" rel="noopener" href="https://www.cnblogs.com/gara/p/9524014.html">网上</a>，在第③步还搞不定的情况下）</p><h2 id="5-2-因虚拟机IP地址改变无法启动"><a href="#5-2-因虚拟机IP地址改变无法启动" class="headerlink" title="5.2 因虚拟机IP地址改变无法启动"></a>5.2 因虚拟机IP地址改变无法启动</h2><p><strong>IP 变化的原因</strong></p><ul><li>DHCP 分配 IP 地址后，有一个租用时长，默认两小时，到了租用时长，ip 就会过期，主机会重新申请 ip 地址，这样地址就变了。</li></ul><p><strong>解决方法一：修改 ip 租用时长</strong></p><p>编辑 - 虚拟网络编辑器 - 更改设置 - 选择带NAT模式的网络（比如我的VMnet8）- DHCP设置</p><p>把默认和最长租用时间调大。</p><p><img src="https://pub-e9bde05ffea74978a0ce3b387e7ee1fd.r2.dev/2024/08/DHCP%E8%AE%BE%E7%BD%AE.png" srcset="/img/loading.gif" lazyload alt="DHCP设置"></p><p><strong>解决方法二：固定 ip 地址</strong></p><ol><li><strong>VMware查看虚拟机网络配置</strong></li></ol><p>编辑 - 虚拟网络编辑器 - 更改设置 - 选择带NAT模式的网络（比如我的VMnet8）</p><p><img src="https://pub-e9bde05ffea74978a0ce3b387e7ee1fd.r2.dev/2024/08/%E8%99%9A%E6%8B%9F%E7%BD%91%E7%BB%9C%E7%BC%96%E8%BE%91%E5%99%A8.png" srcset="/img/loading.gif" lazyload alt="虚拟网络编辑器"></p><p>查看网关 IP：</p><p><img src="https://pub-e9bde05ffea74978a0ce3b387e7ee1fd.r2.dev/2024/08/%E7%BD%91%E5%85%B3IP.png" srcset="/img/loading.gif" lazyload alt="网关IP"></p><p>查看 IP 范围：</p><p><img src="https://pub-e9bde05ffea74978a0ce3b387e7ee1fd.r2.dev/2024/08/IP%E8%8C%83%E5%9B%B4.png" srcset="/img/loading.gif" lazyload alt="IP范围"></p><p>获取到 IP 地址范围、网关地址、子网掩码后，就可以到虚拟机系统操作了。</p><ol><li><strong>修改网卡配置</strong></li></ol><p>启动虚拟机系统（本例使用 CentOS7 系统），在终端输入：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plain">vim /etc/sysconfig/network-scripts/ifcfg-ens33<br></code></pre></td></tr></table></figure><p>注：ens33 为网卡名称，<code>ifconfig</code>命令可以查看。</p><p>工作模式设置为<code>&quot;static&quot;</code>（即将 ip 分配协议改为静态分配），再依次添加规定范围内的固定 ip 地址、子网掩码、网关地址配置：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs plain">BOOTPROTO=&quot;static&quot;<br>IPADDR=192.168.75.129<br>GATEWAY=192.168.75.2<br>NETMASK=255.255.255.0<br>DNS1=8.8.8.8<br></code></pre></td></tr></table></figure><p>修改后如下图：</p><p><img src="https://pub-e9bde05ffea74978a0ce3b387e7ee1fd.r2.dev/2024/08/%E7%BD%91%E5%8D%A1%E9%85%8D%E7%BD%AE.png" srcset="/img/loading.gif" lazyload alt="网卡配置"></p><ol><li><strong>重启网卡</strong></li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plain">systemctl restart network<br></code></pre></td></tr></table></figure></div><hr><div><div class="post-metas my-3"><div class="post-meta mr-3 d-flex align-items-center"><i class="iconfont icon-category"></i> <span class="category-chains"><span class="category-chain"><a href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/" class="category-chain-item">数据库</a> <span>></span> <a href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/Redis/" class="category-chain-item">Redis</a></span></span></div><div class="post-meta"><i class="iconfont icon-tags"></i> <a href="/tags/Redis/" class="print-no-link">#Redis</a></div></div><div class="license-box my-3"><div class="license-title"><div>Redis安装配置</div><div>https://blog-21n.pages.dev/2023/03/08/Redis安装配置/</div></div><div class="license-meta"><div class="license-meta-item"><div>作者</div><div>Neo</div></div><div class="license-meta-item license-meta-date"><div>发布于</div><div>2023年3月8日</div></div><div class="license-meta-item"><div>许可协议</div><div><a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/"><span class="hint--top hint--rounded" aria-label="BY - 署名"><i class="iconfont icon-cc-by"></i></span></a></div></div></div><div class="license-icon iconfont"></div></div><div class="post-prevnext my-3"><article class="post-prev col-6"><a href="/2023/03/08/Redis%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/" title="Redis数据类型"><i class="iconfont icon-arrowleft"></i> <span class="hidden-mobile">Redis数据类型</span> <span class="visible-mobile">上一篇</span></a></article><article class="post-next col-6"><a href="/2023/01/04/Docker%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE/" title="Docker安装配置"><span class="hidden-mobile">Docker安装配置</span> <span class="visible-mobile">下一篇</span> <i class="iconfont icon-arrowright"></i></a></article></div></div></article></div></div></div><div class="side-col d-none d-lg-block col-lg-2"><aside class="sidebar" style="margin-left:-1rem"><div id="toc"><p class="toc-header"><i class="iconfont icon-list"></i> <span>目录</span></p><div class="toc-body" id="toc-body"></div></div></aside></div></div></div><a id="scroll-top-button" aria-label="TOP" href="#" role="button"><i class="iconfont icon-arrowup" aria-hidden="true"></i></a><div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable modal-lg" role="document"><div class="modal-content"><div class="modal-header text-center"><h4 class="modal-title w-100 font-weight-bold">搜索</h4><button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></div><div class="modal-body mx-3"><div class="md-form mb-5"><input type="text" id="local-search-input" class="form-control validate"> <label data-error="x" data-success="v" for="local-search-input">关键词</label></div><div class="list-group" id="local-search-result"></div></div></div></div></div></main><footer><div class="footer-inner"><div class="footer-content"><a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a></div><div class="statistics"><span id="busuanzi_container_site_pv" style="display:none">总访问量 <span id="busuanzi_value_site_pv"></span> 次 </span><span id="busuanzi_container_site_uv" style="display:none">总访客数 <span id="busuanzi_value_site_uv"></span> 人</span></div></div></footer><script src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js"></script><link rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css"><script>NProgress.configure({showSpinner:!1,trickleSpeed:100}),NProgress.start(),window.addEventListener("load",(function(){NProgress.done()}))</script><script src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js"></script><script src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js"></script><script src="/js/events.js"></script><script src="/js/plugins.js"></script><script src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js"></script><script>!function(t,e){var i=Fluid.plugins.typing,n=e.getElementById("subtitle");n&&i&&i(n.getAttribute("data-typed-text"))}(window,document)</script><script src="/js/img-lazyload.js"></script><script>Fluid.utils.createScript("https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js",(function(){var t=jQuery("#toc");if(0!==t.length&&window.tocbot){var i=jQuery("#board-ctn").offset().top;window.tocbot.init(Object.assign({tocSelector:"#toc-body",contentSelector:".markdown-body",linkClass:"tocbot-link",activeLinkClass:"tocbot-active-link",listClass:"tocbot-list",isCollapsedClass:"tocbot-is-collapsed",collapsibleClass:"tocbot-is-collapsible",scrollSmooth:!0,includeTitleTags:!0,headingsOffset:-i},CONFIG.toc)),t.find(".toc-list-item").length>0&&t.css("visibility","visible"),Fluid.events.registerRefreshCallback((function(){if("tocbot"in window){tocbot.refresh();var t=jQuery("#toc");if(0===t.length||!tocbot)return;t.find(".toc-list-item").length>0&&t.css("visibility","visible")}}))}}))</script><script src="https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js"></script><script>Fluid.plugins.codeWidget()</script><script>Fluid.utils.createScript("https://lib.baomitu.com/anchor-js/5.0.0/anchor.min.js",(function(){window.anchors.options={placement:CONFIG.anchorjs.placement,visible:CONFIG.anchorjs.visible},CONFIG.anchorjs.icon&&(window.anchors.options.icon=CONFIG.anchorjs.icon);var n=(CONFIG.anchorjs.element||"h1,h2,h3,h4,h5,h6").split(","),o=[];for(var s of n)o.push(".markdown-body > "+s.trim());"left"===CONFIG.anchorjs.placement&&(window.anchors.options.class="anchorjs-link-left"),window.anchors.add(o.join(", ")),Fluid.events.registerRefreshCallback((function(){if("anchors"in window){anchors.removeAll();var n=(CONFIG.anchorjs.element||"h1,h2,h3,h4,h5,h6").split(","),o=[];for(var s of n)o.push(".markdown-body > "+s.trim());"left"===CONFIG.anchorjs.placement&&(anchors.options.class="anchorjs-link-left"),anchors.add(o.join(", "))}}))}))</script><script>Fluid.utils.createScript("https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js",(function(){Fluid.plugins.fancyBox()}))</script><script>Fluid.plugins.imageCaption()</script><script src="/js/local-search.js"></script><script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="/js/boot.js"></script><noscript><div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div></noscript></body></html>