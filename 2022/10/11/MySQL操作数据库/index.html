<!DOCTYPE html><html lang="zh-CN" data-default-color-scheme="auto"><head><meta charset="UTF-8"><link rel="apple-touch-icon" sizes="76x76" href="/img/avatar.png"><link rel="icon" href="/img/avatar.png"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=5,shrink-to-fit=no"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="theme-color" content="#2f4154"><meta name="author" content="Neo"><meta name="keywords" content=""><meta name="description" content="操作数据库1. 创建数据库语法： 1CREATE DATABASE [IF NOT EXISTS] &lt;数据库名&gt; CHARACTER SET &lt;字符集名&gt; COLLATE &lt;校对规则名&gt;;  其中，[ ]内容表示可选。  IF NOT EXISTS：在创建数据库之前进行判断，只有该数据库目前尚不存在时才能执行操作。【此选项可以用来避免数据库已经存在而重复创建的错"><meta property="og:type" content="article"><meta property="og:title" content="MySQL操作数据库"><meta property="og:url" content="https://blog-21n.pages.dev/2022/10/11/MySQL%E6%93%8D%E4%BD%9C%E6%95%B0%E6%8D%AE%E5%BA%93/index.html"><meta property="og:site_name" content="KingShit"><meta property="og:description" content="操作数据库1. 创建数据库语法： 1CREATE DATABASE [IF NOT EXISTS] &lt;数据库名&gt; CHARACTER SET &lt;字符集名&gt; COLLATE &lt;校对规则名&gt;;  其中，[ ]内容表示可选。  IF NOT EXISTS：在创建数据库之前进行判断，只有该数据库目前尚不存在时才能执行操作。【此选项可以用来避免数据库已经存在而重复创建的错"><meta property="og:locale" content="zh_CN"><meta property="article:published_time" content="2022-10-11T15:22:00.000Z"><meta property="article:modified_time" content="2024-08-27T17:23:06.538Z"><meta property="article:author" content="Neo"><meta property="article:tag" content="MySQL"><meta name="twitter:card" content="summary_large_image"><meta name="referrer" content="no-referrer-when-downgrade"><title>MySQL操作数据库 - KingShit</title><link rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css"><link rel="stylesheet" href="//at.alicdn.com/t/c/font_1749284_5i9bdhy70f8.css"><link rel="stylesheet" href="//at.alicdn.com/t/c/font_1736178_k526ubmyhba.css"><link rel="stylesheet" href="/css/main.css"><link id="highlight-css" rel="stylesheet" href="/css/highlight.css"><link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css"><script id="fluid-configs">var Fluid=window.Fluid||{};Fluid.ctx=Object.assign({},Fluid.ctx);var CONFIG={hostname:"blog-21n.pages.dev",root:"/",version:"1.9.8",typing:{enable:!0,typeSpeed:70,cursorChar:"_",loop:!1,scope:[]},anchorjs:{enable:!0,element:"h1,h2,h3,h4,h5,h6",placement:"left",visible:"hover",icon:""},progressbar:{enable:!0,height_px:3,color:"#29d",options:{showSpinner:!1,trickleSpeed:100}},code_language:{enable:!0,default:"TEXT"},copy_btn:!0,image_caption:{enable:!0},image_zoom:{enable:!0,img_url_replace:["",""]},toc:{enable:!0,placement:"right",headingSelector:"h1,h2,h3,h4,h5,h6",collapseDepth:0},lazyload:{enable:!0,loading_img:"/img/loading.gif",onlypost:!1,offset_factor:2},web_analytics:{enable:!1,follow_dnt:!0,baidu:null,google:{measurement_id:null},tencent:{sid:null,cid:null},leancloud:{app_id:null,app_key:null,server_url:null,path:"window.location.pathname",ignore_local:!1},umami:{src:null,website_id:null,domains:null,start_time:"2024-01-01T00:00:00.000Z",token:null,api_server:null}},search_path:"/local-search.xml",include_content_in_search:!0};if(CONFIG.web_analytics.follow_dnt){var dntVal=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack;Fluid.ctx.dnt=dntVal&&(dntVal.startsWith("1")||dntVal.startsWith("yes")||dntVal.startsWith("on"))}</script><script src="/js/utils.js"></script><script src="/js/color-schema.js"></script><script>!function(){var o;if("boxpiggy.github.io"===window.location.hostname?o="https://boxpiggy.github.io/live2d-widget/autoload.js":"blog-21n.pages.dev"===window.location.hostname&&(o="https://blog-21n.pages.dev/live2d-widget/autoload.js"),o){var t=document.createElement("script");t.src=o,document.head.appendChild(t)}}()</script><meta name="generator" content="Hexo 6.3.0"></head><body><header><div class="header-inner" style="height:70vh"><nav id="navbar" class="navbar fixed-top navbar-expand-lg navbar-dark scrolling-navbar"><div class="container"><a class="navbar-brand" href="/"><strong>Neo&#39;s blog</strong> </a><button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><div class="animated-icon"><span></span><span></span><span></span></div></button><div class="collapse navbar-collapse" id="navbarSupportedContent"><ul class="navbar-nav ml-auto text-center"><li class="nav-item"><a class="nav-link" href="/" target="_self"><i class="iconfont icon-home-fill"></i> <span>首页</span></a></li><li class="nav-item"><a class="nav-link" href="/archives/" target="_self"><i class="iconfont icon-archive-fill"></i> <span>归档</span></a></li><li class="nav-item"><a class="nav-link" href="/categories/" target="_self"><i class="iconfont icon-category-fill"></i> <span>分类</span></a></li><li class="nav-item"><a class="nav-link" href="/tags/" target="_self"><i class="iconfont icon-tags-fill"></i> <span>标签</span></a></li><li class="nav-item"><a class="nav-link" href="/about/" target="_self"><i class="iconfont icon-user-fill"></i> <span>关于</span></a></li><li class="nav-item" id="search-btn"><a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search"><i class="iconfont icon-search"></i></a></li><li class="nav-item" id="color-toggle-btn"><a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle"><i class="iconfont icon-dark" id="color-toggle-icon"></i></a></li></ul></div></div></nav><div id="banner" class="banner" parallax="true" style="background:url(/img/default.png) no-repeat center center;background-size:cover"><div class="full-bg-img"><div class="mask flex-center" style="background-color:rgba(0,0,0,.3)"><div class="banner-text text-center fade-in-up"><div class="h2"><span id="subtitle" data-typed-text="MySQL操作数据库"></span></div><div class="mt-3"><span class="post-meta"><i class="iconfont icon-date-fill" aria-hidden="true"></i> <time datetime="2022-10-11 23:22" pubdate>2022年10月11日 晚上</time></span></div><div class="mt-1"><span class="post-meta mr-2"><i class="iconfont icon-chart"></i> 3.1k 字 </span><span class="post-meta mr-2"><i class="iconfont icon-clock-fill"></i> 26 分钟</span></div></div></div></div></div></div></header><main><div class="container-fluid nopadding-x"><div class="row nomargin-x"><div class="side-col d-none d-lg-block col-lg-2"></div><div class="col-lg-8 nopadding-x-md"><div class="container nopadding-x-md" id="board-ctn"><div id="board"><article class="post-content mx-auto"><h1 id="seo-header">MySQL操作数据库</h1><div class="markdown-body"><h1 id="操作数据库"><a href="#操作数据库" class="headerlink" title="操作数据库"></a>操作数据库</h1><h2 id="1-创建数据库"><a href="#1-创建数据库" class="headerlink" title="1. 创建数据库"></a>1. 创建数据库</h2><p>语法：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">CREATE DATABASE [IF NOT EXISTS] &lt;数据库名&gt; CHARACTER SET &lt;字符集名&gt; COLLATE &lt;校对规则名&gt;;<br></code></pre></td></tr></table></figure><p>其中，<code>[ ]</code>内容表示可选。</p><ul><li><p><strong>IF NOT EXISTS</strong>：在创建数据库之前进行判断，只有该数据库目前尚不存在时才能执行操作。【此选项可以用来避免数据库已经存在而重复创建的错误。】</p></li><li><p>**&lt;数据库名&gt;**：创建数据库的名称。【数据库名称必须符合操作系统的文件夹命名规则，不能以数字开头，尽量要有实际意义。注意在 MySQL 中不区分大小写。】</p></li><li><p><strong>[DEFAULT] CHARACTER SET</strong>：指定数据库采用的字符集，默认utf8</p></li><li><p><strong>[DEFAULT] COLLATE</strong>：指定数据库字符集的校对规则</p></li><li><ul><li>utf8_bin 区分大小写</li><li>utf8_general_ci 不区分大小写（默认）</li><li>…</li></ul></li></ul><blockquote><p>【字符集】是用来定义 MySQL 存储字符串的方式，【校对规则】定义了比较字符串的方式。</p></blockquote><blockquote><p>在创建数据库&#x2F;表的时候，为了规避关键字，可以使用反引号（<code>），且使用反引号命名更符合规范。如：</code>CREATE DATABASE <code>database</code>;&#96;</p></blockquote><h2 id="2-查看数据库的定义信息"><a href="#2-查看数据库的定义信息" class="headerlink" title="2. 查看数据库的定义信息"></a>2. 查看数据库的定义信息</h2><p>可以使用<code>SHOW CREATE DATABASE</code>查看 db01 数据库的定义声明，</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">mysql&gt; </span><span class="language-bash">CREATE DATABASE IF NOT EXISTS `db01` CHARACTER SET utf8 COLLATE utf8_bin;</span><br>Query OK, 1 row affected (0.00 sec)<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">mysql&gt; </span><span class="language-bash">SHOW CREATE DATABASE db01;</span><br>+----------+--------------------------------------------------------------------------------+<br>| Database | Create Database                                                                |<br>+----------+--------------------------------------------------------------------------------+<br>| db01     | CREATE DATABASE `db01` /*!40100 DEFAULT CHARACTER SET utf8 COLLATE utf8_bin */ |<br>+----------+--------------------------------------------------------------------------------+<br>1 row in set (0.03 sec)<br></code></pre></td></tr></table></figure><p>发现该数据库的指定字符集为 utf8，校对规则为utf8_bin。</p><blockquote><p>如果 MySQL 的版本 ≥ 5.5.3，可以把编码设置为 utf8mb4，utf8mb4 和 utf8 完全兼容，但它支持最新的 Unicode 标准，可以显示 emoji 字符。😀</p></blockquote><h2 id="3-删除数据库"><a href="#3-删除数据库" class="headerlink" title="3. 删除数据库"></a>3. 删除数据库</h2><p>慎用！</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">DROP DATABASE [IF EXISTS] db_name;<br></code></pre></td></tr></table></figure><h2 id="4-备份-x2F-恢复数据库"><a href="#4-备份-x2F-恢复数据库" class="headerlink" title="4. 备份 &#x2F; 恢复数据库"></a>4. 备份 &#x2F; 恢复数据库</h2><p>备份数据库（在 DOS 执行）：<code>mysqldump</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">mysqldump -u 用户名 -p -B 数据库1 数据库2 数据库n &gt; 路径\\文件名.sql<br></code></pre></td></tr></table></figure><p>恢复数据库（在 mysql 命令行执行）：<code>source</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">mysql&gt; </span><span class="language-bash"><span class="hljs-built_in">source</span> 路径\\文件名.sql;</span><br></code></pre></td></tr></table></figure><p>备份数据库表：<code>mysqldump</code>（不要<code>-B</code>参数）</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">mysqldump -u 用户名 -p 数据库名 表1 表2 表n &gt; 路径\\文件名.sql<br></code></pre></td></tr></table></figure><h1 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h1><h2 id="1-1-数值类型"><a href="#1-1-数值类型" class="headerlink" title="1.1 数值类型"></a>1.1 数值类型</h2><p>可选参数：<code>[UNSIGNED]</code>（无符号）， <code>[ZEROFILL]</code>（补零）</p><table><tr><td colspan="2">类型名称</td><td>字节</td><td>类型名称</td><td>存储需求（无符号）</td><td>有符号</td><td>说明</td></tr><tr><td rowspan="5" colspan="2">整型</td><td>1</td><td>tinyint</td><td>0-2^8-1（255）</td><td>-2^7~2^7-1</td><td></td></tr><tr><td>2</td><td>smallint</td><td>0-2^16-1（65535）</td><td>-2^15~2^15-1</td><td></td></tr><tr><td>3</td><td>mediumint</td><td>0-2^24-1（16777215）</td><td></td><td></td></tr><tr><td>4</td><td>int</td><td>0-2^32-1</td><td></td><td></td></tr><tr><td>8</td><td>bigint</td><td>0-2^64-1</td><td></td><td></td></tr><tr><td rowspan="3">小数</td><td rowspan="2">浮点型</td><td></td><td>float [(M,D)]</td><td>单精度 4个字节</td><td></td><td>- M（1～255）和 D（1～30，且不能大于 M-2），分别表示显示宽度（精度）和小数位数（标度）；<br>- M 和 D 在 FLOAT 和DOUBLE 中是可选的；<br>- 浮点型不指定精度，默认会按照实际的精度（由计算机硬件和操作系统决定）</td></tr><tr><td></td><td>double [(M,D)]</td><td>双精度 8个字节</td><td></td><td></td></tr><tr><td>定点型</td><td></td><td>decimal [(M,D)]</td><td>变长，取决于M和D，参见下面讨论</td><td></td><td>- M：精度，表示有效数字数的总数；<br>- D：标度，表示小数点后的位数；<br>- 要求：M（1~65），D（0~30），D&lt;=M；<br>- D省略默认是0，M省略默认是10，即默认(10,0)；<br>- 常用于货币数据等高精度数据。</td></tr><tr><td colspan="2">位字段类型</td><td></td><td>BIT(M)</td><td>大约(M+7)/8个字节</td><td></td><td></td></tr></table><p>UNSIGNED</p><p>默认为有符号，如果指定<code>unsigned</code>关键字，则代表无符号：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">CREATE TABLE t1 (id TINYINT UNSIGNED);<br></code></pre></td></tr></table></figure><h3 id="定点类型-DECIMAL-详解"><a href="#定点类型-DECIMAL-详解" class="headerlink" title="定点类型 DECIMAL 详解"></a>定点类型 DECIMAL 详解</h3><p><strong>DECIMAL(M,D) 解释示例：</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">amount DECIMAL(6,2);<br></code></pre></td></tr></table></figure><p>表示<code>amount</code>列最多可以存储<code>6</code>位数字，小数位数为<code>2</code>位; 因此，<code>amount</code>列的范围是从<code>-9999.99</code>到<code>9999.99</code>。</p><p><strong>DECIMAL默认值：</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">mysql&gt; </span><span class="language-bash">CREATE TABLE t3 (d1 DECIMAL);</span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">mysql&gt; </span><span class="language-bash">desc t3;</span><br>+-------+---------------+------+-----+---------+-------+<br>| Field | Type          | Null | Key | Default | Extra |<br>+-------+---------------+------+-----+---------+-------+<br>| d1    | decimal(10,0) | YES  |     | NULL    |       |<br>+-------+---------------+------+-----+---------+-------+<br></code></pre></td></tr></table></figure><p><strong>DECIMAL存储需求</strong></p><p>DECIMAL（和 NUMERIC）的存储需求与具体版本有关（<a target="_blank" rel="noopener" href="https://www.mysqlzh.com/doc/110.html%EF%BC%89">https://www.mysqlzh.com/doc/110.html）</a></p><p>（<a target="_blank" rel="noopener" href="https://juejin.cn/post/6952527628616073230%EF%BC%89">https://juejin.cn/post/6952527628616073230）</a></p><ul><li><p>使用二进制格式将<font color="red">9</font>个十进制(基于10)数压缩为<font color="red">4</font>个字节，来表示 DECIMAL 列值。</p></li><li><p>每个值的整数和分数部分的存储分别确定。</p></li><li><p>每个9位数的倍数需要4个字节，并且“剩余的”位需要4个字节的一部分。下表给出了超出位数的存储需求：</p><table><thead><tr><th>组中包含的十进制位数</th><th>占用存储空间大小（单位：字节）</th></tr></thead><tbody><tr><td>1或2</td><td>1</td></tr><tr><td>3或4</td><td>2</td></tr><tr><td>5或6</td><td>3</td></tr><tr><td>7或8或9</td><td>4</td></tr></tbody></table></li></ul><blockquote><p>提示：不论是定点还是浮点类型，如果用户指定的精度超出精度范围，则会四舍五入进行处理。</p></blockquote><p><strong>BIT</strong></p><ul><li>BIT(M)。M指定位数，默认值1，范围1~64；</li><li>BIT(M)字段按 位的方式（二进制）显示；</li><li>查询使用 添加的数值。</li></ul><h2 id="1-2-字符串类型"><a href="#1-2-字符串类型" class="headerlink" title="1.2 字符串类型"></a>1.2 字符串类型</h2><table><thead><tr><th>类型名称</th><th>说明</th><th>存储需求</th><th>存储需求</th><th>详细说明</th></tr></thead><tbody><tr><td>CHAR(M)</td><td>固定长度非二进制字符串</td><td>M 字符数，0&lt;&#x3D;M&lt;&#x3D;255</td><td>0-2^8-1（255）</td><td>查询速度：char &gt; varchar</td></tr><tr><td>VARCHAR(M)</td><td>变长非二进制字符串</td><td>L+1字节，在此，L&lt; &#x3D; M且 0&lt;&#x3D;M&lt;&#x3D;255</td><td>0-2^16-1（65535）</td><td>实际占用空间：实际数据大小 + 1<del>3个字节。（本身需要占用1</del>3个字节记录存放内容长度）VARCHAR列的有效最大长度为65,532字符。</td></tr><tr><td>BINARY(M)</td><td>固定长度二进制字符串</td><td>M 字节</td><td></td><td></td></tr><tr><td>VARBINARY (M)</td><td>可变长度二进制字符串</td><td>M+1 字节</td><td></td><td></td></tr><tr><td>TINYBLOB</td><td></td><td>L+1字节，在此，L&lt;2^8</td><td></td><td></td></tr><tr><td>TINYTEXT</td><td>非常小的非二进制字符串</td><td>L+1字节，在此，L&lt;2^8</td><td>0-2^8-1</td><td></td></tr><tr><td>BLOB</td><td>小的二进制字符串(字节字符串)</td><td>L+2字节，在此，L&lt;2^16</td><td></td><td>不能有默认值</td></tr><tr><td>TEXT</td><td>小的非二进制字符串（字符字符串）</td><td>L+2字节，在此，L&lt;2^16</td><td>0-2^16-1</td><td>如果varchar不够用，可以使用texttext不能有默认值</td></tr><tr><td>MEDIUMBLOB</td><td></td><td>L+3字节，在此，L&lt;2^24</td><td></td><td></td></tr><tr><td>MEDIUMTEXT</td><td>中等大小的非二进制字符串</td><td>L+3字节，在此，L&lt;2^24</td><td>0-2^24-1</td><td></td></tr><tr><td>LONGBLOB</td><td></td><td>L+4字节，在此，L&lt;2^32</td><td></td><td></td></tr><tr><td>LONGTEXT</td><td>大的非二进制字符串</td><td>L+4字节，在此，L&lt;2^32</td><td>0-2^32-1</td><td></td></tr><tr><td>ENUM</td><td>枚举类型，只能有一个枚举字符串值</td><td>1或2个字节，取决于枚举值的数目 (最大值为65535)</td><td></td><td></td></tr><tr><td>SET</td><td>一个设置，字符串对象可以有零个或 多个SET成员</td><td>1、2、3、4或8个字节，取决于集合 成员的数量（最多64个成员）</td><td></td><td></td></tr></tbody></table><h3 id="详细说明"><a href="#详细说明" class="headerlink" title="详细说明"></a>详细说明</h3><ul><li>char(m)、varchar(m)：m表示字符数，不管是中文还是字母都是按m计算，都以定义好的表的编码来存放。</li><li>要想计算用于保存具体CHAR、VARCHAR或者TEXT列值的字节数，需要考虑该列使用的字符集。</li><li>VARCHAR、BLOB和TEXT类是变长类型。每个类型的存储需求取决于列值的实际长度(用前面的表中的L表示)，而不是该类型的最大可能的大小。例如，VARCHAR(10)列可以容纳最大长度为10的字符串。实际存储需求是字符串(L)的长度，加上一个记录字符串长度的字节。对于字符串’abcd’，L是4，存储需要5个字节。</li><li>NDBCLUSTER引擎只支持固定宽度的列。这说明MySQL簇中的表中的VARCHAR列的行为如同类型CHAR(不同的是每个记录仍然有一个额外字节空间)。例如，在Cluster表中，声明为VARCHAR(100)的列中的每个记录存储时将占用101个字节，无论实际存储的记录中的字符串的长度为多少。</li><li>BLOB和TEXT类需要 1、2、3或者4个字节来记录列值的长度，取决于该类的最大可能的长度。参见<a target="_blank" rel="noopener" href="https://www.mysqlzh.com/doc/109/269.html">11.4.3节，“BLOB和TEXT类型”</a>。</li><li>在NDB Cluster存储引擎中，TEXT和BLOB列的实施是不同的，其中TEXT列中的每个记录由两个单独部分组成。一个是固定大小(256字节)，并且实际上保存在原表中。另一个包括超出256字节的任何数据，保存在隐含的表中。第2个表中的记录总是2,000字节长。这说明如果size&lt;&#x3D; 256，TEXT列的大小为256(其中size表示记录的大小)；否则，大小是256 +size+(2000–(size–256)%2000)。</li><li>ENUM对象的大小由不同的枚举值的数目确定。枚举用一个字节，可以有255个可能的值。当枚举的值位于256和65,535之间时，用两个字节。见<a target="_blank" rel="noopener" href="https://www.mysqlzh.com/doc/109/270.html">11.4.4节，“ENUM类型”</a>。</li><li>SET对象的大小由不同的set成员数量确定。如果set大小是N，对象占(N+7)&#x2F;8个字节，四舍五入到1、2、3、4或者8个字节。SET最多可以有64个成员。见<a target="_blank" rel="noopener" href="https://www.mysqlzh.com/doc/109/271.html">11.4.5节，“SET类型”</a>。</li></ul><h2 id="1-4-日期时间类型"><a href="#1-4-日期时间类型" class="headerlink" title="1.4 日期时间类型"></a>1.4 日期时间类型</h2><table><thead><tr><th>类型名称</th><th>日期格式</th><th>日期范围</th><th>存储需求</th></tr></thead><tbody><tr><td>YEAR</td><td>YYYY</td><td>1901 ~ 2155</td><td>1 个字节</td></tr><tr><td>TIME</td><td>HH:MM:SS</td><td>-838:59:59 ~ 838:59:59</td><td>3 个字节</td></tr><tr><td>DATE</td><td>YYYY-MM-DD</td><td>1000-01-01 ~ 9999-12-3</td><td>3 个字节</td></tr><tr><td>DATETIME</td><td>YYYY-MM-DD HH:MM:SS</td><td>1000-01-01 00:00:00 ~ 9999-12-31 23:59:59</td><td>8 个字节</td></tr><tr><td>TIMESTAMP</td><td>YYYY-MM-DD HH:MM:SS</td><td>1980-01-01 00:00:01 UTC ~ 2040-01-19 03:14:07 UTC</td><td>4 个字节</td></tr></tbody></table><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> T3 (<br>  birthday <span class="hljs-type">DATE</span>,<br>  job_time DATETIME,<br>  login_time <span class="hljs-type">TIMESTAMP</span><br>    <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <br>    <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span>  <span class="hljs-comment">-- 可以为【初始值】使用当前的时间戳</span><br>    <span class="hljs-keyword">ON</span> <span class="hljs-keyword">UPDATE</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span>);  <span class="hljs-comment">-- 可以为【自动更新的值】使用当前的时间戳，TIMESTAMP在INSERT和UPDATE时，自动更新。</span><br></code></pre></td></tr></table></figure><p>在<code>CREATE TABLE</code>语句中，可以使用下列语句声明第1个<code>TIMESTAMP</code>列：</p><ul><li>用<code>DEFAULT CURRENT_TIMESTAMP</code>和<code>ON UPDATE CURRENT_TIMESTAMP</code>子句，列为<strong>默认值使用当前的时间戳，并且自动更新</strong>。</li><li>不用<code>DEFAULT</code>子句但用<code>ON UPDATE CURRENT_TIMESTAMP</code>子句，列有默认值0并自动更新。</li><li>……</li></ul><p><strong>MAXDB 模式</strong></p><p>当服务器以<code>MAXDB</code>模式运行时，<code>TIMESTAMP</code>与<code>DATETIME</code>相等。也就是说，如果创建表时服务器以<code>MAXDB</code>模式运行，<code>TIMESTAMP</code>列创建为<code>DATETIME</code>列。结果是，该列使用<code>DATETIME</code>显示格式，有相同的值范围，并且没有自动对当前的日期和时间进行初始化或更新。</p><p>要想启用<code>MAXDB</code>模式，在启动服务器时使用<code>--sql-mode=MAXDB</code>服务器选项或在运行时通过设置全局<code>sql_mode</code>变量将SQL服务器模式设置为<code>MAXDB</code>：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">mysql&gt; </span><span class="language-bash">SET GLOBAL sql_mode=MAXDB；</span><br></code></pre></td></tr></table></figure><p>客户端可以按照下面方法让服务器为它的连接以MAXDB模式运行：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">mysql&gt; </span><span class="language-bash">SET SESSION sql_mode=MAXDB;</span><br></code></pre></td></tr></table></figure><h1 id="表的操作"><a href="#表的操作" class="headerlink" title="表的操作"></a>表的操作</h1><h2 id="1-创建表"><a href="#1-创建表" class="headerlink" title="1 创建表"></a>1 创建表</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs shell">CREATE TABLE table_name (<br>    field1 datatype,<br>    field2 datatype,<br>    field3 datatype<br>) CHARACTER SET 字符集 COLLATE 校对规则 ENGINE 存储引擎<br></code></pre></td></tr></table></figure><p><code>field</code>：指定列名（字段名） <code>datatype</code>：指定列类型（字段类型）</p><p><code>character set</code>：缺省为所在数据库字符集</p><p><code>collate</code>：缺省为所在数据库校对规则</p><p><code>engine</code>：引擎</p><p><strong>字段设置</strong></p><ol><li><p><code>NOT NULL</code>：把字段设置为 “不允许为空”。</p></li><li><p><code>DEFAULT &#39;value&#39;</code>：为字段设置默认值。</p></li><li><p><code>AUTO_INCREMENT</code>：把字段设置为自增。</p></li><li><ol><li>自增主键的分配，是由InnoDB数据字典内部一个计数器来决定的，而该计数器只在内存中维护，并不会持久化到磁盘中。当数据库重启时，该计数器会通过这种方式初始化：<code>SELECT MAX(ai_col) FROM table_name FOR UPDATE;</code>（来源：<a target="_blank" rel="noopener" href="https://www.jianshu.com/p/68b2cae7e5ed%EF%BC%89">https://www.jianshu.com/p/68b2cae7e5ed）</a></li><li>若中途删除表中记录使自增id断层，可通过<code>ALTER TABLE 表名 AUTO_INCREMENT=n;</code>把自增id重置为指定的值，重新开始计数。</li></ol></li><li><p><code>PRIMARY KEY (</code>字段名<code>)</code>：把字段设置为主键。</p></li></ol><h2 id="2-修改表"><a href="#2-修改表" class="headerlink" title="2 修改表"></a>2 修改表</h2><p>使用<code>ALTER TABLE</code>语句追加(<code>ADD</code>)、修改（<code>MODIFY</code>）、删除（<code>DROP</code>）列，修改字符集（<code>CHARSET</code> &#x2F; <code>CHARACTER SET</code>），修改列名（<code>CHANGE</code>）</p><p>修改表名：<code>RENAME TABLE 表名 TO 新表名</code>，</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs sql"># 在`resume`列后增加`image`列，设置不允许为空，默认值为空<br><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> table_name<br>    <span class="hljs-keyword">ADD</span> [<span class="hljs-keyword">COLUMN</span>] image <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">32</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;&#x27;</span> AFTER resume;  <span class="hljs-comment">-- [COLUMN]可省略</span><br><br># 把`image`列类型长度修改为<span class="hljs-number">60</span><br><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> table_name<br>    MODIFY [<span class="hljs-keyword">COLUMN</span>] image <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">60</span>);<br><br># 删除`image`列<br><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> table_name<br>    <span class="hljs-keyword">DROP</span> [<span class="hljs-keyword">COLUMN</span>] image;<br>    <br># 修改表`emp`字符集为utf8mb4<br><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> employee <br>    CHARSET utf8mb4;<br>    <br># 修改表`emp`名为`employee`<br>RENAME <span class="hljs-keyword">TABLE</span> emp <span class="hljs-keyword">TO</span> employee;<br><br># 列名`name`修改为`user_name`<br><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> employee<br>    CHANGE `name` `user_name` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">64</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;&#x27;</span>;<br></code></pre></td></tr></table></figure><h2 id="3-查看表"><a href="#3-查看表" class="headerlink" title="3 查看表"></a>3 查看表</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">DESC</span> table_name;<br></code></pre></td></tr></table></figure><h2 id="4-删除表"><a href="#4-删除表" class="headerlink" title="4 删除表"></a>4 删除表</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">DROP</span> <span class="hljs-keyword">TABLE</span> table_name;<br></code></pre></td></tr></table></figure><h1 id="增删改查"><a href="#增删改查" class="headerlink" title="增删改查"></a>增删改查</h1><p>示例：创建一个商品表goods，添加id、goods_name、price字段：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `goods` (<br>    id <span class="hljs-type">INT</span>,<br>    goods_name <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">10</span>),<br>    price <span class="hljs-keyword">DOUBLE</span>);<br></code></pre></td></tr></table></figure><h2 id="INSERT（增加）"><a href="#INSERT（增加）" class="headerlink" title="INSERT（增加）"></a>INSERT（增加）</h2><p>基本语法：INSERT INTO &lt;表名&gt; (字段1, 字段2, …) VALUES (值1, 值2, …);</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">INSERT</span> [IGNORE] <span class="hljs-keyword">INTO</span> `goods` (id, goods_name, price)  <span class="hljs-comment">-- [IGNORE]表示如果记录已经存在，就啥事也不干直接忽略</span><br>    <span class="hljs-keyword">VALUES</span>(<span class="hljs-number">10</span>, <span class="hljs-string">&#x27;iphone13 pro max&#x27;</span>, <span class="hljs-number">9000</span>);<br></code></pre></td></tr></table></figure><p>注意事项</p><ol><li>插入的数据值<strong>类型</strong>、<strong>长度</strong>和<strong>顺序</strong>要满足字段的要求，且需要一一对应；</li><li>列可以插入空值，前提是该字段允许为空，<code>INSERT INTO 表名 (列名1, 列名2, 列名3) VALUE(数据1, 数据2, null);</code>：</li></ol><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> `goods`(id, goods_name, price) <span class="hljs-keyword">VALUES</span>(<span class="hljs-number">110</span>, <span class="hljs-keyword">null</span>, <span class="hljs-keyword">null</span>);<br></code></pre></td></tr></table></figure><ol><li>添加多条记录：<code>INSERT INTO 表名 (列名1, 列名2, ...) VALUES (), (), ()...;</code>：</li><li>如果是给表中所有字段添加数据，可以省略(字段名)：<code>INSERT INTO 表名 VALUES(数据1, 数据2, 数据3);</code>：</li><li>默认值，当没有给某个字段赋值，如果该字段有默认值则自动赋默认值，如果该字段没有指定默认值，且没有指定not null，则默认赋null；</li></ol><blockquote><p>另外，自增主键也可以在INSERT中省略</p></blockquote><ol><li>避免插入重复数据的方法（前提条件：插入的数据字段设置了主键或唯一索引）</li></ol></div><hr><div><div class="post-metas my-3"><div class="post-meta mr-3 d-flex align-items-center"><i class="iconfont icon-category"></i> <span class="category-chains"><span class="category-chain"><a href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/" class="category-chain-item">数据库</a> <span>></span> <a href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/MySQL/" class="category-chain-item">MySQL</a></span></span></div><div class="post-meta"><i class="iconfont icon-tags"></i> <a href="/tags/MySQL/" class="print-no-link">#MySQL</a></div></div><div class="license-box my-3"><div class="license-title"><div>MySQL操作数据库</div><div>https://blog-21n.pages.dev/2022/10/11/MySQL操作数据库/</div></div><div class="license-meta"><div class="license-meta-item"><div>作者</div><div>Neo</div></div><div class="license-meta-item license-meta-date"><div>发布于</div><div>2022年10月11日</div></div><div class="license-meta-item"><div>许可协议</div><div><a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/"><span class="hint--top hint--rounded" aria-label="BY - 署名"><i class="iconfont icon-cc-by"></i></span></a></div></div></div><div class="license-icon iconfont"></div></div><div class="post-prevnext my-3"><article class="post-prev col-6"><a href="/2022/11/08/Maven%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE/" title="Maven安装配置"><i class="iconfont icon-arrowleft"></i> <span class="hidden-mobile">Maven安装配置</span> <span class="visible-mobile">上一篇</span></a></article><article class="post-next col-6"><a href="/2022/10/10/MySQL%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE/" title="MySQL安装配置"><span class="hidden-mobile">MySQL安装配置</span> <span class="visible-mobile">下一篇</span> <i class="iconfont icon-arrowright"></i></a></article></div></div></article></div></div></div><div class="side-col d-none d-lg-block col-lg-2"><aside class="sidebar" style="margin-left:-1rem"><div id="toc"><p class="toc-header"><i class="iconfont icon-list"></i> <span>目录</span></p><div class="toc-body" id="toc-body"></div></div></aside></div></div></div><a id="scroll-top-button" aria-label="TOP" href="#" role="button"><i class="iconfont icon-arrowup" aria-hidden="true"></i></a><div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable modal-lg" role="document"><div class="modal-content"><div class="modal-header text-center"><h4 class="modal-title w-100 font-weight-bold">搜索</h4><button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></div><div class="modal-body mx-3"><div class="md-form mb-5"><input type="text" id="local-search-input" class="form-control validate"> <label data-error="x" data-success="v" for="local-search-input">关键词</label></div><div class="list-group" id="local-search-result"></div></div></div></div></div></main><footer><div class="footer-inner"><div class="footer-content"><a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a></div><div class="statistics"><span id="busuanzi_container_site_pv" style="display:none">总访问量 <span id="busuanzi_value_site_pv"></span> 次 </span><span id="busuanzi_container_site_uv" style="display:none">总访客数 <span id="busuanzi_value_site_uv"></span> 人</span></div></div></footer><script src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js"></script><link rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css"><script>NProgress.configure({showSpinner:!1,trickleSpeed:100}),NProgress.start(),window.addEventListener("load",(function(){NProgress.done()}))</script><script src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js"></script><script src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js"></script><script src="/js/events.js"></script><script src="/js/plugins.js"></script><script src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js"></script><script>!function(t,e){var i=Fluid.plugins.typing,n=e.getElementById("subtitle");n&&i&&i(n.getAttribute("data-typed-text"))}(window,document)</script><script src="/js/img-lazyload.js"></script><script>Fluid.utils.createScript("https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js",(function(){var t=jQuery("#toc");if(0!==t.length&&window.tocbot){var i=jQuery("#board-ctn").offset().top;window.tocbot.init(Object.assign({tocSelector:"#toc-body",contentSelector:".markdown-body",linkClass:"tocbot-link",activeLinkClass:"tocbot-active-link",listClass:"tocbot-list",isCollapsedClass:"tocbot-is-collapsed",collapsibleClass:"tocbot-is-collapsible",scrollSmooth:!0,includeTitleTags:!0,headingsOffset:-i},CONFIG.toc)),t.find(".toc-list-item").length>0&&t.css("visibility","visible"),Fluid.events.registerRefreshCallback((function(){if("tocbot"in window){tocbot.refresh();var t=jQuery("#toc");if(0===t.length||!tocbot)return;t.find(".toc-list-item").length>0&&t.css("visibility","visible")}}))}}))</script><script src="https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js"></script><script>Fluid.plugins.codeWidget()</script><script>Fluid.utils.createScript("https://lib.baomitu.com/anchor-js/5.0.0/anchor.min.js",(function(){window.anchors.options={placement:CONFIG.anchorjs.placement,visible:CONFIG.anchorjs.visible},CONFIG.anchorjs.icon&&(window.anchors.options.icon=CONFIG.anchorjs.icon);var n=(CONFIG.anchorjs.element||"h1,h2,h3,h4,h5,h6").split(","),o=[];for(var s of n)o.push(".markdown-body > "+s.trim());"left"===CONFIG.anchorjs.placement&&(window.anchors.options.class="anchorjs-link-left"),window.anchors.add(o.join(", ")),Fluid.events.registerRefreshCallback((function(){if("anchors"in window){anchors.removeAll();var n=(CONFIG.anchorjs.element||"h1,h2,h3,h4,h5,h6").split(","),o=[];for(var s of n)o.push(".markdown-body > "+s.trim());"left"===CONFIG.anchorjs.placement&&(anchors.options.class="anchorjs-link-left"),anchors.add(o.join(", "))}}))}))</script><script>Fluid.utils.createScript("https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js",(function(){Fluid.plugins.fancyBox()}))</script><script>Fluid.plugins.imageCaption()</script><script src="/js/local-search.js"></script><script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="/js/boot.js"></script><noscript><div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div></noscript></body></html>